%æ­¤æ–‡ä»¶ä¸ºå…¨å±€è®¾ç½®
\ProvidesClass{GUET-Thesis}

\LoadClass[ % åŠ è½½æ–‡æ¡£ç±»å¹¶è®¾ç½®é€‰é¡¹
            12pt,                                     % å­—å·ä¸º12pt
            a4paper,                                  % çº¸å¼ å¤§å°ä¸ºA4
            openany,                                  % å…è®¸åœ¨ä»»æ„é¡µé¢å¼€å§‹æ–°çš„ç« èŠ‚
            twoside                                   % è®¾ç½®ä¸ºåŒé¢æ‰“å°æ¨¡å¼
          ]{book}                                     % ä½¿ç”¨bookæ–‡æ¡£ç±»    

\RequirePackage[
                  dvipsnames,                         % å…è®¸ä½¿ç”¨64ç§æ‰©å±•é¢œè‰²åç§°ï¼Œä¾‹å¦‚RoyalBlueã€OliveGreenç­‰
                  svgnames,                           % å…è®¸ä½¿ç”¨150ç§SVGå‘½åé¢œè‰²ï¼Œä¾‹å¦‚DarkOrangeã€MediumPurpleç­‰
                  table                               % å…è®¸åœ¨è¡¨æ ¼ä¸­ä½¿ç”¨é¢œè‰²
                ]{xcolor}                             % ä½¿ç”¨xcolorå®åŒ…ï¼Œå¹¶åŠ è½½é¢œè‰²é€‰é¡¹

% ===============å›¾ç‰‡ç›¸å…³å®åŒ…===============                  
\RequirePackage{graphicx}                             % å¯¼å…¥ graphicx å®åŒ…ï¼Œç”¨äºæ’å…¥å›¾ç‰‡
\RequirePackage[
                  font={onehalfspacing, small},       % è®¾ç½®å­—ä½“ä¸ºonehalfspacingï¼ˆ1.5å€è¡Œè·ï¼‰å’Œsmallï¼ˆå°å·å­—ä½“ï¼‰
                  labelsep=space,                     % è®¾ç½®æ ‡ç­¾å’Œæ ‡é¢˜ä¹‹é—´çš„é—´è·ä¸ºä¸€ä¸ªç©ºæ ¼
                  skip=6pt,                           % è®¾ç½®æ ‡é¢˜ä¸ä¸Šä¸‹æ–‡ä¹‹é—´çš„é—´è·ä¸º6pt
                  figurewithin=none,                  % ç¦æ­¢å›¾è¡¨ç¼–å·å—ç« èŠ‚å½±å“
                  tablewithin=none                    % ç¦æ­¢è¡¨æ ¼ç¼–å·å—ç« èŠ‚å½±å“
                ]{caption}                            % å¯¼å…¥ captionå®åŒ…ï¼Œç”¨äºè‡ªå®šä¹‰æµ®åŠ¨ç¯å¢ƒï¼ˆå¦‚å›¾è¡¨ï¼‰çš„æ ‡é¢˜æ ¼å¼å’Œæ ·å¼
% figurewithin=none å’Œ tablewithin=none å–æ¶ˆä¹¦ç±ç±»ä¸­å¯¹å›¾è¡¨ç›®å½•æ‰€æ·»åŠ çš„ 10pt é—´è·å‘½ä»¤ï¼Œä½¿å¾—å›¾è¡¨ç›®å½•ä¸­çš„ç« èŠ‚ç¼–å·è¿ç»­
% éœ€è¦åœ¨å¯¹åº”çš„è®¡æ•°å™¨ä¸­è¿›è¡Œæ¯ç« é‡ç½®ä»¥ä¿è¯è¿ç»­ç¼–å·
\RequirePackage[labelformat=simple]{subcaption}       % å¯¼å…¥ subcaption å®åŒ…ï¼Œç”¨äºç”Ÿæˆå­å›¾è¡¨å’Œå­æ ‡é¢˜
% labelformat=simple è¡¨ç¤ºå­æ ‡é¢˜çš„æ ‡ç­¾æ ¼å¼ä¸ºç®€å•çš„å½¢å¼

% ===============è¡¨æ ¼ç›¸å…³å®åŒ…===============
\RequirePackage{array}                                % å¯¼å…¥ array å®åŒ…ï¼Œç”¨äºå¢å¼ºè¡¨æ ¼çš„åŠŸèƒ½å’Œæ ¼å¼
\RequirePackage{tabularray}                           % å¯¼å…¥ tabularray å®åŒ…ï¼Œæä¾›æ›´çµæ´»å’ŒåŠŸèƒ½å¼ºå¤§çš„è¡¨æ ¼ç¯å¢ƒ
\RequirePackage{booktabs}                             % å¯¼å…¥ booktabs å®åŒ…ï¼Œç”¨äºç”Ÿæˆæ¼‚äº®çš„ä¸‰çº¿è¡¨æ ¼æ ·å¼
\RequirePackage{longtable}                            % å¯¼å…¥ longtable å®åŒ…ï¼Œæä¾›äº†ä¸€ä¸ªå¯åˆ†é¡µçš„é•¿è¡¨æ ¼ç¯å¢ƒï¼Œç”¨äºè·¨é¡µæ˜¾ç¤ºè¡¨æ ¼å†…å®¹
\RequirePackage{multirow}                             % å¯¼å…¥ multirow å®åŒ…ï¼Œå…è®¸åœ¨è¡¨æ ¼ä¸­åˆå¹¶å¤šè¡Œ
\RequirePackage[absolute,overlay]{textpos}            % å¯¼å…¥ textpos å®åŒ…ï¼Œç”¨äºç»å¯¹å®šä½æ–‡æœ¬æ¡†ï¼Œç”¨äºè®¾ç½®å¯†çº§ç­‰ä¿¡æ¯


% ===============å…¬å¼ç›¸å…³å®åŒ…===============    
\RequirePackage{amsmath}                              % å¯¼å…¥ amsmath å®åŒ…ï¼Œæä¾›æ•°å­¦å…¬å¼ç¯å¢ƒå’Œå‘½ä»¤
\RequirePackage{amssymb}                              % å¯¼å…¥ amssymb å®åŒ…ï¼Œæä¾›é¢å¤–çš„æ•°å­¦ç¬¦å·
\RequirePackage{amsthm}                               % å¯¼å…¥ amsthm å®åŒ…ï¼Œç”¨äºå®šä¹‰å’Œæ’ç‰ˆå®šç†ã€å¼•ç†ç­‰æ•°å­¦å®šç†ç»“æ„
\RequirePackage{mathspec}                             % å¯¼å…¥ mathspec å®åŒ…ï¼Œç”¨äºåœ¨æ•°å­¦ç¯å¢ƒä¸­é€‰æ‹©è‡ªå®šä¹‰çš„å­—ä½“


% ===============ç›®å½•ç›¸å…³å®åŒ…===============
\RequirePackage[titles]{tocloft}                      % å¯¼å…¥ tocloft å®åŒ…ï¼Œç”¨äºè®¾ç½®ç›®å½•çš„æ ·å¼å’Œæ ¼å¼
% titles è¡¨ç¤ºç›®å½•ä¸­çš„ç« èŠ‚æ ‡é¢˜ä¹ŸåŒ…å«åœ¨ç›®å½•ä¸­   

% ===============ç¬¦å·è¯´æ˜ç›¸å…³å®===============    
\RequirePackage{framed}                               % å¯¼å…¥ framed å®åŒ…ï¼Œç”¨äºç»™å†…å®¹æ·»åŠ æ¡†æ¶æ•ˆæœ
\RequirePackage{multicol}                             % å¯¼å…¥ multicol å®åŒ…ï¼Œæä¾›å¤šæ ç¯å¢ƒ
\RequirePackage[]{nomencl}                            % å¯¼å…¥ nomencl å®åŒ…ï¼Œç”¨äºç”Ÿæˆç¬¦å·è¯´æ˜

% ===============å­—ä½“ç›¸å…³å®åŒ…===============    
\RequirePackage{lmodern}                              % å¯¼å…¥ lmodern å®åŒ…ï¼Œä½¿ç”¨ Latin Modern å­—ä½“ï¼Œæä¾›æ›´å¥½çš„å­—ä½“æ”¯æŒ
\RequirePackage{xeCJK}                                % å¯¼å…¥ xeCJK å®åŒ…ï¼Œç”¨äºè®¾ç½®å…¨å±€çš„ä¸­æ—¥éŸ©æ–‡å­—ä½“
\RequirePackage{xeCJKfntef}                           % å¯¼å…¥ xeCJKfntef å®åŒ…ï¼Œç”¨äºæä¾›æ›´å¤šçš„å­—ä½“æ•ˆæœè®¾ç½®é€‰é¡¹ï¼Œå…¼å®¹ulemå®åŒ…
% \RequirePackage[normalem]{ulem}                       % å¯¼å…¥ ulem å®åŒ…ï¼Œæä¾›äº†å„ç§ä¸‹åˆ’çº¿å’Œåˆ é™¤çº¿çš„å‘½ä»¤
\RequirePackage{zhnumber}                             % å¯¼å…¥ zhnumber å®åŒ…ï¼Œç”¨äºå°†æ•°å­—è½¬æ¢ä¸ºå¤§å†™ä¸­æ–‡æ•°å­—çš„è¡¨ç¤º
\RequirePackage{pifont}                               % å¯¼å…¥ pifont å®åŒ…ï¼Œæä¾›äº†è®¸å¤šç¬¦å·å’Œå›¾æ ‡çš„å‘½ä»¤
\RequirePackage{datetime}                             % å¯¼å…¥ datetime å®åŒ…ï¼Œæä¾›æ—¥æœŸå’Œæ—¶é—´æ ¼å¼æ§åˆ¶åŠŸèƒ½ï¼ŒåŒ…æ‹¬ \today å‘½ä»¤

% ===============é“¾æ¥ç›¸å…³å®åŒ…===============    
\RequirePackage[hyphens]{xurl}                        % å¯¼å…¥ xurl å®åŒ…ï¼Œå…è®¸åœ¨é•¿ç½‘å€ä¸­æ–­è¡Œï¼Œé¿å…è¶…å‡ºè¾¹ç•Œ
\RequirePackage[
                  unicode,                            % è®¾ç½®æ˜¯å¦ä½¿ç”¨ Unicode å­—ç¬¦é›†
                  pdfencoding=auto,                   % è®¾ç½® PDF ç¼–ç æ ¼å¼
                  bookmarks=true,                     % è®¾ç½® PDF æ–‡ä»¶æ˜¯å¦ç”Ÿæˆä¹¦ç­¾
                  hyperfootnotes=false,               % è®¾ç½®æ˜¯å¦ç»™è„šæ³¨æ·»åŠ é“¾æ¥
                  bookmarksnumbered=true,             % è®¾ç½® PDF ä¹¦ç­¾æ˜¯å¦å¸¦ç¼–å·
                  bookmarksdepth=4                    % è®¾ç½®ä¹¦ç­¾çš„æ·±åº¦
                ]{hyperref}                           % å¯¼å…¥ hyperref å®åŒ…ï¼Œç”¨äºè®¾ç½®ä¹¦ç­¾å’Œè¶…é“¾æ¥

% ===============æ’ç‰ˆç›¸å…³å®åŒ…===============
\RequirePackage{setspace}                             % å¯¼å…¥ setspace å®åŒ…ï¼Œæä¾›è°ƒæ•´è¡Œè·çš„å‘½ä»¤å’Œç¯å¢ƒ
\RequirePackage{indentfirst}                          % å¯¼å…¥ indentfirst å®åŒ…ï¼Œç”¨äºåœ¨ç« èŠ‚æ ‡é¢˜åè‡ªåŠ¨ç¼©è¿›ç¬¬ä¸€æ®µè½
\RequirePackage{float}                                % å¯¼å…¥ float å®åŒ…ï¼Œæä¾›æµ®åŠ¨ç¯å¢ƒå’Œæµ®åŠ¨å¯¹è±¡çš„æ§åˆ¶
\RequirePackage{fancyvrb}                             % å¯¼å…¥ fancyvrb å®åŒ…ï¼Œæä¾›äº†æ›´çµæ´»çš„æŠ„å½•ç¯å¢ƒå’Œå®šåˆ¶é€‰é¡¹
\RequirePackage{fancyhdr}                             % å¯¼å…¥ fancyhdr å®åŒ…ï¼Œç”¨äºè®¾ç½®é¡µçœ‰å’Œé¡µè„šçš„æ ·å¼
\RequirePackage{titlesec}                             % å¯¼å…¥ titlesec å®åŒ…ï¼Œç”¨äºè‡ªå®šä¹‰ç« èŠ‚æ ‡é¢˜çš„æ ·å¼
\RequirePackage{appendix}                             % å¯¼å…¥ appendix å®åŒ…ï¼Œç”¨äºç”Ÿæˆé™„å½•å¹¶å¯¹é™„å½•æ ‡é¢˜è¿›è¡Œæ ¼å¼è®¾ç½®
\RequirePackage{enumitem}                             % å¯¼å…¥ enumitem å®åŒ…ï¼Œç”¨äºå®šåˆ¶åˆ—è¡¨ç¯å¢ƒçš„æ ·å¼å’Œæ ‡ç­¾
\RequirePackage[
                  numbers,                            % å¼•ç”¨çš„æ ‡å·ä¸ºæ•°å­—
                  sort&compress,                      % å¼•ç”¨çš„æ ‡å·æŒ‰é¡ºåºæ’åºå¹¶å‹ç¼©
                  super,                              % å¼•ç”¨çš„ä¸Šæ ‡æ ·å¼
                  square                              % å¼•ç”¨çš„æ ‡å·ä»¥æ–¹æ‹¬å·åŒ…å›´
                ]{natbib}                             % å¯¼å…¥ natbib å®åŒ…ï¼Œç”¨äºè®¾ç½®å‚è€ƒæ–‡çŒ®å¼•ç”¨çš„æ ¼å¼

\RequirePackage[
                  algochapter,                        % å°†ç®—æ³•æ”¾åœ¨ç« èŠ‚ä¸­ï¼Œå¹¶ä»¥ç« èŠ‚ç¼–å·
                  boxruled,                           % ç»™ç®—æ³•æ·»åŠ è¾¹æ¡†
                  linesnumbered                       % ç»™ç®—æ³•æ·»åŠ è¡Œå·
                ]{algorithm2e}                        % å¯¼å…¥ algorithm2e å®åŒ…ï¼Œç”¨äºæ’ç‰ˆç®—æ³•å’Œä¼ªä»£ç 

\RequirePackage{enumitem}                             % å¯¼å…¥ enumitem å®åŒ…ï¼Œç”¨äºå®šåˆ¶åˆ—è¡¨ç¯å¢ƒçš„æ ·å¼å’Œæ ‡ç­¾
\RequirePackage{etoolbox}                             % å¯¼å…¥ etoolbox å®åŒ…ï¼Œæä¾›å¤„ç† TeX å’Œ LaTeX ä»£ç çš„å·¥å…·


\RequirePackage[nottoc]{tocbibind}                    % å¯¼å…¥ tocbibind å®åŒ…ï¼Œç”¨äºå°†å‚è€ƒæ–‡çŒ®åˆ—è¡¨å¿«é€Ÿæ’å…¥ç›®å½•ä¸­ 
% nottoc è¡¨ç¤ºä¸å°†å‚è€ƒæ–‡çŒ®åˆ—è¡¨æœ¬èº«æ·»åŠ åˆ°ç›®å½•ä¸­

% ===============é¡µç ç›¸å…³å®åŒ…===============
\RequirePackage{lastpage}                             % å¯¼å…¥ lastpage å®åŒ…ï¼Œç”¨äºç»Ÿè®¡æ€»é¡µæ•°
\RequirePackage{ifoddpage}                            % å¯¼å…¥ ifoddpage å®åŒ…ï¼Œç”¨äºåˆ¤æ–­é¡µç æ˜¯å¦ä¸ºå¥‡æ•°
\RequirePackage{pdfpages}                             % å¯¼å…¥ pdfpages å®åŒ…ï¼Œç”¨äºæ’å…¥å¤–éƒ¨ PDF æ–‡æ¡£çš„é¡µé¢
\RequirePackage{geometry}                             % å¯¼å…¥ geometry å®åŒ…ï¼Œç”¨äºè®¾ç½®é¡µé¢å°ºå¯¸å’Œå¸ƒå±€
\RequirePackage{ifxetex}                              % å¯¼å…¥ ifxetex å®åŒ…ï¼Œåˆ¤æ–­æ˜¯å¦ä½¿ç”¨ XeLaTeX ç¼–è¯‘ï¼Œä»¥å†³å®šåç»­çš„åŒ…å’Œè®¾ç½®çš„ä½¿ç”¨
\RequirePackage{ifplatform}                           % å¯¼å…¥ ifplatform å®åŒ…ï¼Œç”¨äºåˆ¤æ–­å½“å‰çš„æ“ä½œç³»ç»Ÿå¹³å°
\RequirePackage{ifthen}                               % å¯¼å…¥ ifthen å®åŒ…ï¼Œæä¾›äº† \ifthenelse å‘½ä»¤ï¼Œç”¨äºæ¡ä»¶åˆ¤æ–­å’Œåˆ†æ”¯æ§åˆ¶
\RequireXeTeX                                         % æŒ‡å®šå¿…é¡»ç”¨ XeTeX å¼•æ“è¿›è¡Œç¼–è¯‘
\RequirePackage{cleveref}                             % å¯¼å…¥ cleveref å®åŒ…ï¼Œç”¨äºå¼•ç”¨å’Œäº¤å‰å¼•ç”¨çš„æ ¼å¼è®¾ç½®


\hypersetup{                                          % æ–‡ä¸­é“¾æ¥è®¾ç½®
              % pdfauthor = {\theauthor},             % è®¾ç½®ä½œè€…åç§°ï¼›
              % pdftitle = {\zh@thetitle},            % è®¾ç½®æ–‡æ¡£çš„æ ‡é¢˜ï¼›
              % pdfsubject = {\displayheader},        % è®¾ç½®æ–‡æ¡£ä¸»é¢˜ï¼›
              % pdfkeywords = {},                     % è®¾ç½®æ–‡æ¡£ä¸­å…³é”®è¯
              colorlinks=true,                        % æŒ‡å®šæ˜¯å¦ç»™é“¾æ¥æ·»åŠ é¢œè‰²ï¼›
              citecolor=black,                        % citecoloré“¾æ¥é¢œè‰²è®¾ç½®ï¼›
              linkcolor=black,                        % linkcolorå¼•ç”¨é¢œè‰²è®¾ç½®ï¼›
              urlcolor=black                          % urlcolorç½‘å€é¢œè‰²ï¼›
            }



% ================å®šä¹‰é«˜äº®å‘½ä»¤è®¾ç½®===============
\newcommand{\hl}{\CJKsout*[thickness=2.5ex,format=\color{yellow}]} % æ–°å®šä¹‰é«˜äº®å‘½ä»¤\gl ç”¨æ¥é«˜äº®æ˜¾ç¤ºä¸­æ–‡

% ===============å®šä¹‰æ‰“å°ç‰ˆé€‰é¡¹===============
\newboolean{@pversion}                                             % æ–°å®šä¹‰ä¸€ä¸ªåä¸º @pversion çš„å¸ƒå°”å€¼
\setboolean{@pversion}{false}                                      % è®¾å®šå¸ƒå°”å€¼çš„é»˜è®¤å€¼ä¸º false
\DeclareOption{pversion}{\setboolean{@pversion}{true}}             % å½“è®¾å®šé€‰é¡¹ä¸ºpversionæ—¶ @pversion ä¸º true
\ProcessOptions\relax

\newcommand{\ifpversion}[2]{ \ifthenelse{\boolean{@pversion}}{#1}{#2}}
% æ–°å®šä¹‰ä¸€ä¸ªå‘½ä»¤ \ifpversion å¦‚æœ @pversion ä¸ºtrue åˆ™æ‰§è¡Œ #1 å¦åˆ™ æ‰§è¡Œ #2

% ================é¡µè¾¹è·è®¾ç½®===============
\ifpversion{ % æ‰“å°ç‰ˆï¼Œå†…ä¾§é¡µè¾¹è·å¤§ï¼Œå¤–ä¾§å°ğŸ‘‡
              \geometry{inner=3cm, outer=2cm, top=3cm, bottom=2cm}
            }{ % ç”µå­ç‰ˆé¡µè¾¹è·ç›¸åŒğŸ‘‡
              \geometry{left=2.5cm, right=2.5cm, top=3cm, bottom=2cm, headsep=0.3cm, footskip=0.7cm}
            }


% ===============å®šä¹‰ç©ºç™½é¡µå‘½ä»¤=============== 
\newcommand\blankpage{ % å®šä¹‰æ·»åŠ ç©ºç™½é¡µ
                        \newpage
                        \thispagestyle{empty} %æ²¡æœ‰é¡µçœ‰é¡µè„šï¼Œç©ºç™½é¡µ
                        \null
                        \newpage
                      }

% ===============å®šä¹‰å¸¦é¡µçœ‰é¡µè„šç©ºç™½é¡µå‘½ä»¤=============== 
\newcommand\blankpage@number{\newpage\null\newpage}

% ===============å­—ä½“è®¾ç½®===============
\ifwindows
  \setCJKmainfont[AutoFakeBold=true,AutoFakeSlant =true]{SimSun}             % åœ¨Windowså¹³å°ä¸Šè®¾ç½®ä¸­æ–‡å­—ä½“ä¸ºSimSun
  \newCJKfontfamily{\kaiti}[AutoFakeBold=true]{KaiTi}                        % è®¾ç½®æ¥·ä½“å­—ä½“ä¸ºKaiTi 
  \newCJKfontfamily{\heiti}[AutoFakeBold=true,AutoFakeSlant =true]{SimHei}   % è®¾ç½®é»‘ä½“å­—ä½“ä¸ºSimHei
  \newfontfamily{\heiti@letter}{SimHei}                                      % è®¾ç½®å­—æ¯çš„é»‘ä½“å­—ä½“ä¸ºSimHei
  \setallmainfonts{Times New Roman}                                          % è®¾ç½®è‹±æ–‡å­—ä½“ä¸ºTimes New Roman
\else
  \ifmacosx
    \setCJKmainfont[AutoFakeBold=true,AutoFakeSlant =true]{Songti SC}         % åœ¨macOSå¹³å°ä¸Šè®¾ç½®ä¸­æ–‡å­—ä½“ä¸ºSongti SC
    \newCJKfontfamily{\kaiti}[AutoFakeBold=true]{KaiTi}                       % è®¾ç½®æ¥·ä½“å­—ä½“ä¸ºKaiTi
    \newCJKfontfamily{\heiti}[AutoFakeBold=true,AutoFakeSlant =true]{STHeiti} % è®¾ç½®é»‘ä½“å­—ä½“ä¸ºSTHeiti
    \newfontfamily{\heiti@letter}{STHeiti}                                    % è®¾ç½®å­—æ¯çš„é»‘ä½“å­—ä½“ä¸ºSTHeiti
    \setallmainfonts{Times New Roman}                                         % è®¾ç½®è‹±æ–‡å­—ä½“ä¸ºTimes New Roman
  \else
    \setCJKmainfont[AutoFakeBold=true,AutoFakeSlant =true,Path = ./Fonts/]{fzsong.ttf}            % åœ¨å…¶ä»–å¹³å°ä¸Šè®¾ç½®ä¸­æ–‡å­—ä½“ä¸ºfzsong.ttfï¼Œå¹¶æŒ‡å®šå­—ä½“æ–‡ä»¶è·¯å¾„ä¸º./Fonts/
    \newCJKfontfamily{\kaiti}[AutoFakeBold=true,Path=./Fonts/]{fzkaiti.ttf}                       % è®¾ç½®æ¥·ä½“å­—ä½“ä¸ºfzkaiti.ttfï¼Œå¹¶æŒ‡å®šå­—ä½“æ–‡ä»¶è·¯å¾„ä¸º./Fonts/
    \newCJKfontfamily{\heiti}[AutoFakeBold=true,AutoFakeSlant =true,Path = ./Fonts/]{fzhei.ttf}   % è®¾ç½®é»‘ä½“å­—ä½“ä¸ºfzhei.ttfï¼Œå¹¶æŒ‡å®šå­—ä½“æ–‡ä»¶è·¯å¾„ä¸º./Fonts/
    \newfontfamily{\heiti@letter}{fzhei.ttf}[Path = ./Fonts/]                                     % è®¾ç½®å­—æ¯çš„é»‘ä½“å­—ä½“ä¸ºfzhei.ttfï¼Œå¹¶æŒ‡å®šå­—ä½“æ–‡ä»¶è·¯å¾„ä¸º./Fonts/
    \setallmainfonts[
                      BoldFont=timesbd.ttf,         % ç²—ä½“å­—ä½“ä¸ºtimesbd.ttf
                      ItalicFont=timesi.ttf,        % æ–œä½“å­—ä½“ä¸ºtimesi.ttf
                      BoldItalicFont=timesbi.ttf,   % ç²—æ–œä½“å­—ä½“ä¸ºtimesbi.ttf
                      Path=./Fonts/                 % æŒ‡å®šå­—ä½“æ–‡ä»¶è·¯å¾„ä¸º./Fonts/
                    ]{times.ttf}                    % è®¾ç½®è‹±æ–‡å­—ä½“ä¸ºtimes.ttf
  \fi
\fi

% ===============è®¾ç½®æ•°å­¦å­—ä½“===============
% å®šä¹‰æ•°å­¦å­—ä½“ \mathbf
\DeclareMathAlphabet{\mathbf}{\eu@enc}{\eu@mathrm}{\bfdefault}{it}

% å‚æ•°è§£é‡Šï¼š
% - \eu@enc: å­—ä½“ç¼–ç ï¼Œå¯ä»¥æ˜¯ä»»æ„æœ‰æ•ˆçš„å­—ä½“ç¼–ç 
% - \eu@mathrm: å­—æ¯å­—ä½“ï¼Œé€šå¸¸ä¸ºæ¬§æ‹‰å­—ä½“
% - \bfdefault: å­—ä½“ç³»åˆ—ï¼Œé€šå¸¸ä¸ºé»˜è®¤ç²—ä½“ç³»åˆ—
% - it: å­—ä½“å½¢çŠ¶ï¼Œé€šå¸¸ä¸ºæ–œä½“å½¢çŠ¶

% å®šä¹‰æ•°å­¦å­—ä½“ \mathbd
\DeclareMathAlphabet{\mathbd}{\eu@enc}{\eu@mathrm}{\bfdefault}{n}

% å‚æ•°è§£é‡Šï¼š
% - \eu@enc: å­—ä½“ç¼–ç ï¼Œå¯ä»¥æ˜¯ä»»æ„æœ‰æ•ˆçš„å­—ä½“ç¼–ç 
% - \eu@mathrm: å­—æ¯å­—ä½“ï¼Œé€šå¸¸ä¸ºæ¬§æ‹‰å­—ä½“
% - \bfdefault: å­—ä½“ç³»åˆ—ï¼Œé€šå¸¸ä¸ºé»˜è®¤ç²—ä½“ç³»åˆ—
% - n: å­—ä½“å½¢çŠ¶ï¼Œé€šå¸¸ä¸ºæ­£å¸¸å­—å½¢çŠ¶

% å®šä¹‰æ•°å­¦å‘½ä»¤ \bmï¼Œå…¶æ•ˆæœä¸ºä½¿ç”¨ \mathbf å­—ä½“
\newcommand{\bm}{\mathbf}

% \bm: æ•°å­¦å‘½ä»¤ï¼Œç”¨äºä½¿ç”¨ \mathbf å­—ä½“
% æ³¨ï¼š\bm å¯ä»¥æ›¿ä»£ \mathbf ä½¿ç”¨ï¼Œæä¾›æ›´ç®€æ´çš„è¾“å…¥æ–¹å¼ã€‚


% ++++++++++++++++++++++++++++++++++++++++++++++++++ å°é¢è®¾ç½®ç›¸å…³ ++++++++++++++++++++++++++++++++++++++++++++++++++


% ===============è®¾ç½®å°é¢æ—¶é—´æ ¼å¼===============
\renewcommand{\today}{\number\year å¹´ \number\month æœˆ \number\day æ—¥}

% ===============å°é¢ä¿¡æ¯å˜é‡å®šä¹‰===============
\newcommand{\zh@thetitle}{\quad}         % æ ‡é¢˜
\newcommand{\en@thetitle}{\quad}         % è‹±æ–‡æ ‡é¢˜
\newcommand{\theauthor}{\quad}           % ä½œè€…
\newcommand{\thedate}{\quad}             % æ—¥æœŸ
\newcommand{\theschool}{\quad}           % å­¦é™¢
\newcommand{\themajor}{\quad}            % ä¸“ä¸š
\newcommand{\theresearchdirection}{\quad}% ç ”ç©¶æ–¹å‘
\newcommand{\theadvisor}{\quad}          % å¯¼å¸ˆå§“å
\newcommand{\theprotitle}{\quad}         % å¯¼å¸ˆèŒç§°
\newcommand{\thesecrets}{\qquad}         % å¯†çº§
\newcommand{\thestudentnumber}{\quad}    % å­¦å·
\newcommand{\thedegreecategories}{\quad} % å­¦ä½ç±»åˆ«


% ===============å°é¢ä¿¡æ¯è·å–===============
\renewcommand{\title}[2]{
                          \renewcommand{\zh@thetitle}{#1}                     % æ ‡é¢˜
                          \renewcommand{\en@thetitle}{#2}                     % è‹±æ–‡æ ‡é¢˜
                        }

\newcommand{\secrets}[1]{\renewcommand{\thesecrets}{#1}}                      % å¯†çº§
\renewcommand{\author}[1]{\renewcommand{\theauthor}{#1}}                      % ä½œè€…
\renewcommand{\date}[1]{\renewcommand{\thedate}{#1}}                          % æ—¥æœŸ
\newcommand{\major}[1]{\renewcommand{\themajor}{#1}}                          % ä¸“ä¸š
\newcommand{\researchdirection}[1]{\renewcommand{\theresearchdirection}{#1}}  % ç ”ç©¶æ–¹å‘
\newcommand{\school}[1]{\renewcommand{\theschool}{#1}}                        % å­¦é™¢
\newcommand{\advisor}[1]{\renewcommand{\theadvisor}{#1}}                      % å¯¼å¸ˆå§“å
\newcommand{\protitle}[1]{\renewcommand{\theprotitle}{#1}}                    % å¯¼å¸ˆèŒç§°
\newcommand{\studentnumber}[1]{\renewcommand{\thestudentnumber}{#1}}          % å­¦å·
\newcommand{\degreecategories}[1]{\renewcommand{\thedegreecategories}{#1}}    % å­¦ä½ç±»åˆ«


% ====================æœ¬ç¡•åšé€‰é¡¹å£°æ˜====================
%\DeclareOption{é€‰é¡¹}{ä»£ç }å…¶ä¸­çš„é€‰é¡¹å°±æ˜¯é€‰é¡¹çš„åç§°ï¼Œè€Œä»£ç å°±æ˜¯é€‰é¡¹è¦æ‰§è¡Œçš„æŒ‡ä»¤é›†ã€‚
\DeclareOption{bachelor}{
                          \def\degreename{æœ¬ç§‘}
                          \def\booktitle{æœ¬ç§‘æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰}
                          \def\displayheader{æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æœ¬ç§‘ç”Ÿå­¦ä½è®ºæ–‡}
                        }
\DeclareOption{master}{
                          \def\degreename{ç¡•å£«}
                          \def\booktitle{ç¡•\enspace å£«\enspace å­¦\enspace ä½\enspace è®º\enspace æ–‡}
                          \def\displayheader{æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦ç¡•å£«å­¦ä½è®ºæ–‡}
                        }
\DeclareOption{promaster}{
                            \def\degreename{ä¸“ä¸šç¡•å£«}
                            \def\booktitle{ç¡•\enspace å£«\enspace å­¦\enspace ä½\enspace è®º\enspace æ–‡}
                            \def\displayheader{æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦ç¡•å£«å­¦ä½è®ºæ–‡}
                          }
\DeclareOption{ojmaster}{
                          \def\degreename{åœ¨èŒç¡•å£«}
                          \def\booktitle{ç¡•\enspace å£«\enspace å­¦\enspace ä½\enspace è®º\enspace æ–‡}
                          \def\displayheader{æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦ç¡•å£«å­¦ä½è®ºæ–‡}
                        }
\DeclareOption{ptmaster}{
                          \def\degreename{éå…¨ç¡•å£«}
                          \def\booktitle{ç¡•\enspace å£«\enspace å­¦\enspace ä½\enspace è®º\enspace æ–‡}
                          \def\displayheader{æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦ç¡•å£«å­¦ä½è®ºæ–‡}
                        }
\DeclareOption{doctor}{
                        \def\degreename{åšå£«}
                        \def\booktitle{åš\enspace å£«\enspace å­¦\enspace ä½\enspace è®º\enspace æ–‡}
                        \def\displayheader{æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦åšå£«å­¦ä½è®ºæ–‡}
                      }
\ExecuteOptions{master} % é»˜è®¤å€¼ä¸ºç¡•å£«
\ProcessOptions\relax



% ===============å°é¢åˆ¶ä½œ===============
% æ–°å®šä¹‰åˆ¤æ–­å˜é‡ï¼Œå¦‚æœå­¦ä½åæ˜¯ä¸“ä¸šç¡•å£«åˆ™æ‰§è¡Œ#1å‘½ä»¤ï¼Œå¦æ‰§è¡Œ#2å‘½ä»¤
\newcommand{\ifbachelor}[2]{ \ifthenelse{\equal{\degreename}{æœ¬ç§‘}}{#1}{#2}}
\newcommand{\ifpromaster}[1]{ \ifthenelse{\equal{\degreename}{ä¸“ä¸šç¡•å£«}}{#1}{}}
\newcommand{\ifmaster}[1]{ \ifthenelse{\equal{\degreename}{ç¡•å£«}}{#1}{}}
\newcommand{\ifojmaster}[1]{ \ifthenelse{\equal{\degreename}{åœ¨èŒç¡•å£«}}{#1}{}}
\newcommand{\ifptmaster}[1]{ \ifthenelse{\equal{\degreename}{éå…¨ç¡•å£«}}{#1}{}}
\newcommand{\ifdoctor}[1]{ \ifthenelse{\equal{\degreename}{åšå£«}}{#1}{}}
\newcommand{\ifpro}[2]{\ifthenelse{\equal{\degreename}{ä¸“ä¸šç¡•å£«} \or \equal{\degreename}{éå…¨ç¡•å£«}}{#1}{#2}} % åˆ¤æ–­æ˜¯å¦æ˜¯ä¸“ä¸šç¡•å£«æˆ–éå…¨ç¡•å£«


% ==============ç›²å®¡é€‰é¡¹è®¾ç½®===============
\newboolean{@bversion}                                                 % æ–°å®šä¹‰ä¸€ä¸ªåä¸º @bversion çš„å¸ƒå°”å€¼
\setboolean{@bversion}{false}                                          % è®¾å®šå¸ƒå°”å€¼çš„é»˜è®¤å€¼ä¸º false
\DeclareOption{bversion}{\setboolean{@bversion}{true}}                 % å½“è®¾å®šé€‰é¡¹ä¸ºbversionæ—¶ @bversion ä¸º true
\ProcessOptions\relax
\newcommand{\ifbversion}[2]{ \ifthenelse{\boolean{@bversion}}{#1}{#2}} % æ–°å®šä¹‰ä¸€ä¸ªå‘½ä»¤ \ifbversion å¦‚æœ @bversion ä¸ºtrue åˆ™æ‰§è¡Œ #1 å¦åˆ™ æ‰§è¡Œ #2


\newcommand{\makecover}
{
  \thispagestyle{empty}                                     % æ²¡æœ‰é¡µçœ‰é¡µè„šï¼Œç©ºç™½é¡µ
  \setlength{\extrarowheight}{9pt}
  \pdfbookmark{å°é¢}{cover}

  \setlength{\TPHorizModule}{1cm}                           % è®¾ç½®textblockç¯å¢ƒçš„æ°´å¹³å•ä½    
  \setlength{\TPVertModule}{1cm}                            % è®¾ç½®textblockç¯å¢ƒçš„å‚ç›´å•ä½      

  % ================è®¾ç½®å¯†çº§æ ¼å¼
  \ifbachelor{ % æœ¬ç§‘æ— å¯†çº§ğŸ‘‡
  }{ % ç¡•åšå¯†çº§ğŸ‘‡
    \begin{textblock}{5}(12.6,2.1)
      % \textblockcolour{red!30} % è®¾ç½®èƒŒæ™¯é¢œè‰²
      \begin{flushright}
        å¯†\enspace çº§ \underline{\hspace*{2.5em}\thesecrets\hspace*{2.5em}}
      \end{flushright}
    \end{textblock}
  }
  ~\\

  % ================è®¾ç½®LOGO
  \ifbachelor{ % æœ¬ç§‘LOGOğŸ‘‡
    \begin{textblock}{15}(3,3.2)
      \centering
      \ifpversion{
          \includegraphics[width=0.95 \textwidth]{./Pictures/Guet-logo-black.pdf}
        }{
          \includegraphics[width=0.95 \textwidth]{./Pictures/Guet-logo.pdf}
        }
    \end{textblock}
  }{ % ç¡•åšLOGOğŸ‘‡
    \begin{textblock}{15}(3,4.4)
      \centering
      \ifpversion{
          \includegraphics[width=0.95 \textwidth]{./Pictures/Guet-logo-black.pdf}
        }{
          \includegraphics[width=0.95 \textwidth]{./Pictures/Guet-logo.pdf}
        }
    \end{textblock}
  }

  % ================è®¾ç½®å¤§é¢˜ç›®

  \begin{textblock}{10}(5.5,7.85)
    \centering
    \ifbachelor{% æœ¬ç§‘ğŸ‘‡
      \fontsize{26pt}{26pt}\selectfont{\heiti\bfseries\booktitle}\\
    }{}
  \end{textblock}

  \begin{textblock}{10}(5.5,7.85)
    \centering
    \ifpromaster{ % ä¸“ç¡•ğŸ‘‡
      \fontsize{26pt}{26pt}\selectfont{\heiti\bfseries\booktitle} \\
      \fontsize{20pt}{26pt}\selectfont{\bfseriesï¼ˆå…¨æ—¥åˆ¶ä¸“ä¸šå­¦ä½ç¡•å£«ï¼‰}\\
    }
    \ifojmaster{ % åœ¨èŒå­¦ç¡•ğŸ‘‡
      \fontsize{26pt}{26pt}\selectfont{\heiti\bfseries\booktitle} \\
      \fontsize{20pt}{26pt}\selectfont{\bfseriesï¼ˆåœ¨èŒç ”ç©¶ç”Ÿï¼‰}\\
    }
    \ifptmaster{ % éå…¨ä¸“ç¡•ğŸ‘‡
      \fontsize{26pt}{26pt}\selectfont{\heiti\bfseries\booktitle} \\
      \fontsize{20pt}{26pt}\selectfont{\bfseriesï¼ˆéå…¨æ—¥åˆ¶ä¸“ä¸šå­¦ä½ç¡•å£«ï¼‰}\\
    }

    \ifmaster{ % å­¦ç¡•ğŸ‘‡
      \fontsize{26pt}{26pt}\selectfont{\heiti\bfseries\booktitle}\\
    }
    \ifdoctor{ % åšå£«ğŸ‘‡
      \fontsize{26pt}{26pt}\selectfont{\heiti\bfseries\booktitle}\\
    }
  \end{textblock}


  % ================è®¾ç½®é¢˜ç›®
  \NewExpandableDocumentCommand\zh@thetitle@tb{}{\zh@thetitle} % åˆ›å»ºå¤–éƒ¨å‚æ•°ï¼Œå¯¼å…¥é¢˜ç›®è¡¨æ ¼ä¸­
  \NewExpandableDocumentCommand\en@thetitle@tb{}{\en@thetitle}
  \ifbachelor{ % æœ¬ç§‘é¢˜ç›® ğŸ‘‡
    \begin{textblock}{15}(2.8,11.3)
      \centering
      \begin{tblr}[expand=\expanded]
        {
          stretch=1.2, % å•å…ƒæ ¼æ–‡æœ¬è¡Œè·æ‹‰ä¼¸ç³»æ•°
          colspec = {c c}, % è®¾ç½®åˆ—å¯¹é½æ–¹å¼
          column{1} = {1.4cm}, % è®¾ç½®ç¬¬ä¸€åˆ—å®½åº¦
          column{2} = {11.4cm,font =\bfseries\fontsize{16pt}{16pt}\selectfont}, % è®¾ç½®ç¬¬äºŒåˆ—çš„å®½åº¦ã€å­—ä½“å¤§å°ç²—ç»†
          hline{2-Z} = {2}{1pt}, % ä»ç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œï¼ˆZï¼‰å­˜åœ¨æ¨ªçº¿ï¼ˆhline{2-Z}ï¼‰ï¼Œç¬¬äºŒåˆ—æ¨ªçº¿å®½1.5ptï¼ˆ{2}{1.5pt}ï¼‰
          belowsep = {-4pt} % å•å…ƒæ ¼åº•çº¿å‘ä¸Šåç§»4pt
        }
        \bfseries\fontsize{16bp}{16bp}\selectfont é¢˜ç›®: & \expanded{\zh@thetitle@tb{}}
      \end{tblr}
    \end{textblock}

  }{ % ç¡•åšé¢˜ç›®ğŸ‘‡
    \ifbversion{ % ç›²å®¡å°é¢ğŸ‘‡
    }{ % éç›²å®¡å°é¢ğŸ‘‡
      \begin{textblock}{18}(1.4,9.6)
        \centering
        \ifpromaster{\vspace{0.9cm}}             % ä¸“ç¡•ğŸ‘‡
        \ifojmaster{\vspace{0.9cm}}              % åœ¨èŒå­¦ç¡•ğŸ‘‡
        \ifptmaster{\vspace{0.9cm}}              % éå…¨ä¸“ç¡•ğŸ‘‡
        \begin{tblr}[expand=\expanded]
          {
            stretch=2,                                                            % å•å…ƒæ ¼æ–‡æœ¬è¡Œè·æ‹‰ä¼¸ç³»æ•°
            colspec = {c c},                                                      % è®¾ç½®åˆ—å¯¹é½æ–¹å¼
            column{1} = {1.5cm},                                                  % è®¾ç½®ç¬¬ä¸€åˆ—å®½åº¦
            column{2} = {12.6cm,font =\bfseries\fontsize{14bp}{26bp}\selectfont}, % è®¾ç½®ç¬¬äºŒåˆ—çš„å®½åº¦ã€å­—ä½“å¤§å°ç²—ç»†
            hline{2-Z} = {2}{1.25pt},                                             % ä»ç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œï¼ˆZï¼‰å­˜åœ¨æ¨ªçº¿ï¼ˆhline{2-Z}ï¼‰ï¼Œç¬¬äºŒåˆ—æ¨ªçº¿å®½1.5ptï¼ˆ{2}{1.5pt}ï¼‰
            belowsep = {-8pt}                                                     % å•å…ƒæ ¼åº•çº¿å‘ä¸Šåç§»8pt
          }
          \bfseries\fontsize{16bp}{16bp}\selectfont é¢˜ç›®   & \expanded{\zh@thetitle@tb{}} \\
          \bfseries\fontsize{14bp}{14bp}\selectfont (è‹±æ–‡) & \expanded{\en@thetitle@tb{}}
        \end{tblr}
      \end{textblock}
    }
  }




  % ================è®¾ç½®ä¿¡æ¯æ ¼å¼

  \ifbachelor{ % æœ¬ç§‘å°é¢ä¿¡æ¯ ğŸ‘‡
    \begin{textblock}{16}(2.4,16.9)
      \centering
      \begin{tblr}
        {
          stretch=1.9,                                                         % å•å…ƒæ ¼æ–‡æœ¬è¡Œè·æ‹‰ä¼¸ç³»æ•°
          colspec = {c c},                                                     % è®¾ç½®åˆ—å¯¹é½æ–¹å¼
          column{1} = {4cm, font = \bfseries\fontsize{15pt}{15pt}\selectfont}, % è®¾ç½®ç¬¬ä¸€åˆ—å®½åº¦
          column{2} = {9.6cm, font = \fontsize{14bp}{26bp}\selectfont},        % è®¾ç½®ç¬¬äºŒåˆ—çš„å®½åº¦ã€å­—ä½“å¤§å°ç²—ç»†
          hline{2-Z} = {2}{1pt},                                               % ä»ç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œï¼ˆZï¼‰å­˜åœ¨æ¨ªçº¿ï¼ˆhline{2-Z}ï¼‰ï¼Œç¬¬äºŒåˆ—æ¨ªçº¿å®½1.5ptï¼ˆ{2}{1.5pt}ï¼‰
          belowsep = {-7pt}                                                    % å•å…ƒæ ¼åº•çº¿å‘ä¸Šåç§»7pt
        }
        å­¦\hspace{0.36cm} \qquad \qquad å·:                                                  & \thestudentnumber \\
        å§“\hspace{0.36cm} \qquad \qquad å:                                                  & \theauthor        \\
        å­¦\hspace{0.36cm} \qquad \qquad é™¢:                                                  & \theschool        \\
        ä¸“\quad \hspace{0.36cm} \qquad \quad ä¸š:                                             & \themajor         \\
        æŒ‡\hspace{0.38cm} å¯¼\hspace{0.38cm} æ•™\hspace{0.38cm} å¸ˆ:                              & \theadvisor       \\
        æŒ‡\hspace{0.1pt} å¯¼\hspace{0.1pt} æ•™\hspace{0.1pt} å¸ˆ\hspace{0.1pt} èŒ\hspace{0.1pt} ç§°: & \theprotitle
      \end{tblr}
    \end{textblock}

    \begin{textblock}{8}(6,26.9) %æ—¥æœŸå±…ä¸­
      \centering\fontsize{16pt}{16pt}\selectfont \thedate
    \end{textblock}

  }{ % ç¡•åšå°é¢ä¿¡æ¯ ğŸ‘‡
    \ifbversion{ % ç›²å®¡å°é¢ğŸ‘‡
      \begin{textblock}{16}(2.4,14.8)
        \bfseries\fontsize{16pt}{32pt}\selectfont % è®¾ç½®å­—ä½“ä¸ºä¸‰å·ï¼Œ2å€è¡Œè·
        é¢˜\qquad ç›®ï¼š\zh@thetitle

        ä¸“\qquad ä¸šï¼š\themajor

        ç ”ç©¶æ–¹å‘ï¼š\theresearchdirection
      \end{textblock}
    }{ % éç›²å®¡å°é¢ğŸ‘‡
      \begin{textblock}{15}(2.9,16.3) %
        \centering
        \ifpro{ % ä¸“ç¡•æˆ–éå…¨ä¸“ç¡•çš„å°é¢ä¿¡æ¯ ğŸ‘‡
          \begin{tblr}
            {
              stretch=2.2, % å•å…ƒæ ¼æ–‡æœ¬è¡Œè·æ‹‰ä¼¸ç³»æ•°
              colspec = {c c}, % è®¾ç½®åˆ—å¯¹é½æ–¹å¼
              column{1} = {5cm, font = \bfseries\fontsize{15pt}{15pt}\selectfont}, % è®¾ç½®ç¬¬ä¸€åˆ—å®½åº¦
              column{2} = {6.5cm, font = \bfseries\fontsize{15pt}{15pt}\selectfont}, % è®¾ç½®ç¬¬äºŒåˆ—çš„å®½åº¦ã€å­—ä½“å¤§å°ç²—ç»†
              hline{2-Z} = {2}{1.25pt}, % ä»ç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œï¼ˆZï¼‰å­˜åœ¨æ¨ªçº¿ï¼ˆhline{2-Z}ï¼‰ï¼Œç¬¬äºŒåˆ—æ¨ªçº¿å®½1.5ptï¼ˆ{2}{1.5pt}ï¼‰
              belowsep = {-11pt} % å•å…ƒæ ¼åº•çº¿å‘ä¸Šåç§»11pt
            }
            ç ”\quad ç©¶\quad ç”Ÿ\quad å­¦\quad å·:                    & \thestudentnumber                 \\
            ç ”\quad ç©¶\quad ç”Ÿ\quad å§“\quad å:                    & \theauthor                        \\
            æŒ‡å¯¼æ•™å¸ˆå§“åã€èŒç§°:                                        & \theadvisor \enspace \theprotitle \\
            ç”³\enspace è¯·\enspace å­¦\quad ä½\enspace ç±»\enspace åˆ«: & \thedegreecategories              \\
            é¢†\hspace{7em}åŸŸ:                                   & \themajor                         \\
            è®º\enspace æ–‡\enspace ç­”\quad è¾©\enspace æ—¥\enspace æœŸ: & \thedate
          \end{tblr}
        }{ % åšå£«ã€å­¦ç¡•ã€åœ¨èŒç¡•å£«çš„å°é¢ä¿¡æ¯ ğŸ‘‡
          \begin{tblr}
            {
              stretch=2.2, % å•å…ƒæ ¼æ–‡æœ¬è¡Œè·æ‹‰ä¼¸ç³»æ•°
              colspec = {c c}, % è®¾ç½®åˆ—å¯¹é½æ–¹å¼
              column{1} = {5cm, font = \bfseries\fontsize{15pt}{15pt}\selectfont}, % è®¾ç½®ç¬¬ä¸€åˆ—å®½åº¦
              column{2} = {6.5cm, font = \bfseries\fontsize{15pt}{15pt}\selectfont}, % è®¾ç½®ç¬¬äºŒåˆ—çš„å®½åº¦ã€å­—ä½“å¤§å°ç²—ç»†
              hline{2-Z} = {2}{1.25pt}, % ä»ç¬¬äºŒè¡Œåˆ°æœ€åä¸€è¡Œï¼ˆZï¼‰å­˜åœ¨æ¨ªçº¿ï¼ˆhline{2-Z}ï¼‰ï¼Œç¬¬äºŒåˆ—æ¨ªçº¿å®½1.5ptï¼ˆ{2}{1.5pt}ï¼‰
              belowsep = {-11pt} % å•å…ƒæ ¼åº•çº¿å‘ä¸Šåç§»11pt
            }
            ç ”\quad ç©¶\quad ç”Ÿ\quad å­¦\quad å·:                    & \thestudentnumber                 \\
            ç ”\quad ç©¶\quad ç”Ÿ\quad å§“\quad å:                    & \theauthor                        \\
            æŒ‡å¯¼æ•™å¸ˆå§“åã€èŒç§°:                                        & \theadvisor \enspace \theprotitle \\
            ç”³\enspace è¯·\enspace å­¦\quad ä½\enspace é—¨\enspace ç±»: & \thedegreecategories              \\
            å­¦\qquad ç§‘ã€ä¸“\qquad ä¸š:                              & \themajor                         \\
            è®º\enspace æ–‡\enspace ç­”\quad è¾©\enspace æ—¥\enspace æœŸ: & \thedate
          \end{tblr}
        }
      \end{textblock}
    }
  }
  \setcounter{page}{1}
  \setlength{\extrarowheight}{2pt}

  %åˆ¤æ–­æ˜¯å¦ä¸ºæ‰“å°
  \ifpversion{\blankpage}{}
}

% % ====================å¯¼å…¥å°é¢PDFæ–‡ä»¶è®¾ç½®====================
% \newcommand{\bindpdfcover}[1]{
%   \pdfbookmark{å°é¢}{cover}
%   \includepdf[pages=-]{#1}
%   \newpage\setcounter{page}{0}
% }

% ====================ç‹¬åˆ›æ€§ï¼ˆæˆ–åˆ›æ–°æ€§ï¼‰å£°æ˜è®¾ç½®====================
\newcommand{\originalitydeclaration}{
  \newpage
  \thispagestyle{empty} %æ²¡æœ‰é¡µçœ‰é¡µè„šï¼Œç©ºç™½é¡µ
  \begin{spacing}{1.5}
    \pdfbookmark{ç‹¬åˆ›æ€§ï¼ˆæˆ–åˆ›æ–°æ€§ï¼‰å£°æ˜}{originalitydeclaration}
    \noindent
    \ifbachelor{     % æœ¬ç§‘ç‹¬åˆ›æ€§å£°åğŸ‘‡
      \begin{center}
        \fontsize{14pt}{20pt}\selectfont\bfseries æœ¬ç§‘ç”Ÿæ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰ç‹¬åˆ›æ€§å£°å
      \end{center}

      \par{\fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{24pt} % % \noindentæ— ç¼©è¿›
        æœ¬äººå£°æ˜æ‰€å‘ˆäº¤çš„æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰æ˜¯æˆ‘ä¸ªäººåœ¨æŒ‡å¯¼è€å¸ˆæŒ‡å¯¼ä¸‹è¿›è¡Œçš„å·¥ä½œåŠå–å¾—çš„æˆæœã€‚å°½æˆ‘æ‰€çŸ¥ï¼Œé™¤äº†æ–‡ä¸­ç‰¹åˆ«åŠ ä»¥æ ‡æ³¨å’Œè‡´è°¢ä¸­æ‰€ç½—åˆ—çš„å†…å®¹ä»¥å¤–ï¼Œæ–‡ä¸­ä¸åŒ…å«å…¶ä»–äººæˆ–å…¶å®ƒæœºæ„å·²ç»å‘è¡¨æˆ–æ’°å†™è¿‡çš„æˆæœï¼›ä¹Ÿä¸åŒ…å«ä¸ºè·å¾—æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æˆ–å…¶ä»–æ•™è‚²æœºæ„çš„å­¦ä½æˆ–è¯ä¹¦è€Œä½¿ç”¨è¿‡çš„ææ–™ã€‚å…¶ä»–åŒå¿—å¯¹æœ¬å·¥ä½œçš„å¯å‘å’Œæ‰€åšçš„ä»»ä½•è´¡çŒ®å‡å·²åœ¨æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰ä¸­åšäº†æ˜ç¡®çš„è¯´æ˜å¹¶è¡¨ç¤ºäº†è°¢æ„ã€‚}
      \\
      \vspace{-1cm}
      \fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{19pt} % \noindentæ— ç¼©è¿›
      æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰è‹¥æœ‰ä¸å®ä¹‹å¤„ï¼Œæœ¬äººæ‰¿æ‹…ä¸€åˆ‡ç›¸å…³è´£ä»»ã€‚
      \\

      \vspace{2cm}
      \fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{27pt}æœ¬äººç­¾åï¼š\hspace{84pt} %
      æ—¥æœŸï¼š \\
      \vspace{2cm}
      \noindent
      \begin{center} % \noindentæ— ç¼©è¿›
        \fontsize{14pt}{24pt}\selectfont\bfseries æœ¬ç§‘ç”Ÿæ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰ä½¿ç”¨æˆæƒè¯´æ˜
      \end{center}

      \par{\fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{24pt} %
        æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æœ‰æƒä¿ç•™å¹¶å‘å›½å®¶æœ‰å…³éƒ¨é—¨æˆ–æœºæ„é€äº¤æ¯•ä¸šè®¾è®¡è¯´æ˜ä¹¦ï¼ˆè®ºæ–‡ï¼‰çš„å¤å°ä»¶ï¼Œå…è®¸æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰è¢«æŸ¥é˜…å’Œå€Ÿé˜…ã€‚æœ¬äººæˆæƒæ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦å¯ä»¥å…¬å¸ƒæ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å†…å®¹ï¼Œå¯ä»¥é‡‡ç”¨å½±å°ã€ç¼©å°æˆ–å…¶å®ƒå¤åˆ¶æ‰‹æ®µä¿å­˜ã€æ±‡ç¼–æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰}
      \\

      \vspace{1.5cm}
      \fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{24pt}ä½œè€…ç­¾åï¼š
      \hspace{84pt} %
      æ—¥æœŸï¼š \\ \\

      \fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{24pt}å¯¼å¸ˆç­¾åï¼š
      \hspace{84pt} %
      æ—¥æœŸï¼š \\
    }{ % ç¡•åšç‹¬åˆ›æ€§å£°åğŸ‘‡
      \begin{center} % \noindentæ— ç¼©è¿›
        \fontsize{14pt}{20pt}\selectfont\bfseries ç‹¬åˆ›æ€§å£°æ˜
      \end{center}

      \par{\fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{24pt} % % \noindentæ— ç¼©è¿›
        æœ¬äººå£°æ˜æ‰€å‘ˆäº¤çš„è®ºæ–‡æ˜¯æˆ‘ä¸ªäººåœ¨å¯¼å¸ˆæŒ‡å¯¼ä¸‹è¿›è¡Œçš„ç ”ç©¶å·¥ä½œåŠå–å¾—çš„ç ”ç©¶æˆæœã€‚
        å°½æˆ‘æ‰€çŸ¥ï¼Œé™¤äº†æ–‡ä¸­ç‰¹åˆ«åŠ ä»¥æ ‡æ³¨å’Œè‡´è°¢ä¸­æ‰€ç½—åˆ—çš„å†…å®¹ä»¥å¤–ï¼Œè®ºæ–‡ä¸­ä¸åŒ…å«å…¶ä»–äººå·²ç»å‘è¡¨æˆ–æ’°å†™è¿‡çš„ç ”ç©¶æˆæœï¼›
        ä¹Ÿä¸åŒ…å«ä¸ºè·å¾—æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æˆ–å…¶å®ƒæ•™è‚²æœºæ„çš„å­¦ä½æˆ–è¯ä¹¦è€Œä½¿ç”¨è¿‡çš„ææ–™ã€‚
        ä¸æˆ‘ä¸€åŒå·¥ä½œçš„åŒå¿—å¯¹æœ¬ç ”ç©¶æ‰€åšçš„ä»»ä½•è´¡çŒ®å‡å·²åœ¨è®ºæ–‡ä¸­åšäº†æ˜ç¡®çš„è¯´æ˜å¹¶è¡¨ç¤ºäº†è°¢æ„ã€‚}
      \\

      \fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{24pt} % \noindentæ— ç¼©è¿›
      ç”³è¯·å­¦ä½è®ºæ–‡ä¸èµ„æ–™è‹¥æœ‰ä¸å®ä¹‹å¤„ï¼Œæœ¬äººæ‰¿æ‹…ä¸€åˆ‡ç›¸å…³è´£ä»»ã€‚%
      \\

      \fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{24pt}æœ¬äººç­¾åï¼š\hspace{84pt} %
      æ—¥æœŸï¼š \\

      \vspace{1cm}
      \noindent
      \begin{center} % \noindentæ— ç¼©è¿›
        \fontsize{14pt}{20pt}\selectfont\bfseries å…³äºè®ºæ–‡ä½¿ç”¨æˆæƒçš„è¯´æ˜
      \end{center}

      \par{\fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{24pt} %
        æœ¬äººå®Œå…¨äº†è§£æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æœ‰å…³ä¿ç•™å’Œä½¿ç”¨å­¦ä½è®ºæ–‡çš„è§„å®šï¼Œå³ï¼šç ”ç©¶ç”Ÿåœ¨æ ¡æ”»è¯»å­¦ä½æœŸé—´è®ºæ–‡å·¥ä½œçš„çŸ¥è¯†äº§æƒå•ä½å±æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦ã€‚
        æœ¬äººä¿è¯æ¯•ä¸šç¦»æ ¡åï¼Œç»“åˆå­¦ä½è®ºæ–‡ç ”ç©¶æˆæœå®Œæˆçš„è®ºæ–‡ã€å‘æ˜ä¸“åˆ©ç­‰æˆæœï¼Œç½²åå•ä½ä»ç„¶ä¸ºæ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦ã€‚
        å­¦æ ¡æœ‰æƒä¿ç•™é€äº¤è®ºæ–‡çš„å¤å°ä»¶ï¼Œå…è®¸æŸ¥é˜…å’Œå€Ÿé˜…è®ºæ–‡ï¼›
        å­¦æ ¡å¯ä»¥å…¬å¸ƒè®ºæ–‡çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å†…å®¹ï¼Œå¯ä»¥å…è®¸é‡‡ç”¨å½±å°ã€ç¼©å°æˆ–å…¶å®ƒå¤åˆ¶æ‰‹æ®µä¿å­˜è®ºæ–‡ã€‚
        ï¼ˆä¿å¯†çš„è®ºæ–‡åœ¨è§£å¯†åéµå®ˆæ­¤è§„å®šï¼‰}\\

      \vspace{1cm}

      \fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{24pt}ä½œè€…ç­¾åï¼š
      \hspace{84pt} %
      æ—¥æœŸï¼š \\

      \fontsize{12pt}{12pt}\selectfont\noindent\null\hspace{24pt}å¯¼å¸ˆç­¾åï¼š
      \hspace{84pt} %
      æ—¥æœŸï¼š \\
    }
  \end{spacing}
  \ifpversion{\blankpage}{}
}

% ====================å¯¼å…¥ç‹¬åˆ›æ€§å£°æ˜å®šä¹‰PDFæ–‡ä»¶è®¾ç½®====================
\newcommand{\signatureofdeclaration}[1]
{
  \includepdf[pages=-]{#1}
  \newpage\setcounter{page}{0}
  \ifpversion{\blankpage}{}
}

% ++++++++++++++++++++++++++++++++++++++++++++++++ å°é¢è®¾ç½®ç›¸å…³ç»“æŸ ++++++++++++++++++++++++++++++++++++++++++++++++


% ===============å®šä¹‰ç›¸å…³çº¿å®½===============
\setlength{\heavyrulewidth}{0.9pt}
\setlength{\lightrulewidth}{0.5pt}
\setlength{\arrayrulewidth}{0.5pt}
\setlength{\cmidrulewidth}{0.5pt}

% ===============enumitemç¯å¢ƒè®¾ç½®===============
\AddEnumerateCounter*{\chinese}{\zhnumber}{\arabic} % enumitem ä¸­æ–‡ç¼–å·è®¾ç½®
\urlstyle{rm}
\raggedbottom % å°†å½“å‰é¡µé¢çš„åº•éƒ¨å¯¹é½æ–¹å¼è®¾ç½®ä¸ºâ€œä¸é½å¹³â€

% ===============è®¾ç½®é¡µçœ‰çº¿===============
\ifbachelor{ % æœ¬ç§‘é¡µçœ‰å•çº¿ ğŸ‘‡
  \newdimen\singlelineskip
  \setlength\singlelineskip{2pt}
  \renewcommand\headrule{
    \hrule height\headrulewidth width\headwidth%
    \vskip 1.2\singlelineskip}
}{ % ç¡•åšé¡µçœ‰åŒçº¿ ğŸ‘‡
  \newdimen\doublelineskip % ä¸¤æ¨ªçº¿é—´çš„è·ç¦»
  \setlength\doublelineskip{1pt}
  \renewcommand\headrule{ 
    \hrule height\headrulewidth width\headwidth%
    \vskip 1.2\doublelineskip
    \hrule height\headrulewidth width\headwidth
  }
  \renewcommand{\headrulewidth}{1pt} % è®¾ç½®é¡µçœ‰çº¿å®½åº¦
}

% ===============è®¾ç½®æ®µè½æ ¼å¼===============
\setlength{\headheight}{17pt} % é«˜17pt
\pagestyle{fancy}             % è®¾ç½®é£æ ¼ä¸ºfancy
\linespread{1.389}            % å­—å·å¤§å°ä¸º12bpï¼ŒåŸºæœ¬è¡Œè·ä¸º12Ã—1.2=14.4bpï¼Œæ¬²è®¾ç½®è¡Œè·ä¸º20bpï¼Œåˆ™å› å­ä¸º20/14.4=1.389
\setlength\parindent{24pt}    % è®¾ç½®ç¼©è¿›é•¿åº¦ ä¸¤ä¸ªå°å›› ptï¼šç£…ï¼Œbpï¼šå¤§ç‚¹ï¼Œpcï¼špica 

% ===============è®¾ç½®æ ‡é¢˜æ®µè½===============  
\titlespacing{\chapter}{0pt}{0pt}{18pt}
\titlespacing{\section}{0pt}{18pt}{6pt}
\titlespacing{\subsection}{0pt}{12pt}{6pt}
\titlespacing{\subsubsection}{0pt}{12pt}{6pt}
%æ ‡é¢˜å‘¨è·è®¾ç½®ï¼Œ\titlespacing*{æ ‡é¢˜å‘½ä»¤}{å·¦é—´è·}{ä¸Šé—´è·}{ä¸‹é—´è·} [å³é—´è·]ï¼Œç”¨å®ƒå¯ä»¥è®¾ç½®æ¯ç§å±‚æ¬¡æ ‡é¢˜ä¸å››å‘¨ä¹‹é—´çš„è·ç¦»ã€‚


% ===============è®¾ç½®æ ‡é¢˜æ ¼å¼===============  

\ifbachelor{ % æœ¬ç§‘å°èŠ‚ç¼–å·æ ¼å¼ ğŸ‘‡
  \renewcommand\thechapter{\arabic{chapter}}
  \renewcommand\thesection{\arabic{chapter}.\arabic{section}}
}{ % ç¡•åšå°èŠ‚ç¼–å·æ ¼å¼ ğŸ‘‡
  \renewcommand\thechapter{ç¬¬\zhnumber{\arabic{chapter}}ç« } %\zhnumber{è®¡æ•°å™¨}ï¼Œä½¿è®¡æ•°å™¨å€¼è¾“å‡ºä¸ºæ±‰å­—æ ¼å¼ã€‚
  \renewcommand\thesection{\S\arabic{chapter}.\arabic{section}}
}
%\theè®¡æ•°å™¨ï¼Œæ˜¾ç¤ºè®¡æ•°å™¨çš„å€¼ï¼Œè¯¥å‘½ä»¤åªä½¿ç”¨äºåºå·è®¡æ•°å™¨ï¼Œä¾‹å¦‚\thepageæ˜¾ç¤ºå½“å‰é¡µç ã€‚\value{è®¡æ•°å™¨}è°ƒç”¨è®¡æ•°å™¨çš„å€¼ï¼Œæ— è®ºè®¡æ•°å™¨çš„è®¡æ•°å½¢å¼å¦‚ä½•éƒ½è¢«è½¬æ¢æˆå¯¹åº”çš„é˜¿æ‹‰ä¼¯æ•°å­—ã€‚ \S æ ‡é¢˜å‰åŠ ç‰¹æ•°ç¬¦å·
\counterwithin{figure}{chapter}  % è®¾ç½®å¯¹åº”è®¡æ•°å™¨æ¯ç« é‡ç½®
\counterwithin{table}{chapter}   % è®¾ç½®å¯¹åº”è®¡æ•°å™¨æ¯ç« é‡ç½®
\ifbachelor{ % æœ¬ç§‘å›¾è¡¨å…¬å¼é¢˜æ³¨ç¼–å·æ ¼å¼ ğŸ‘‡
  \renewcommand{\theequation}{\arabic{chapter}.\arabic{equation}} % æ˜¾ç¤ºå…¬å¼ç¼–å·ï¼Œå…¶æ ¼å¼x-x
  \renewcommand{\thetable}{\arabic{chapter}.\arabic{table}}       % æ˜¾ç¤ºè¡¨æ ¼ç¼–å·ï¼Œå…¶æ ¼å¼x-x
  \renewcommand{\thefigure}{\arabic{chapter}.\arabic{figure}}     % æ˜¾ç¤ºæ’å›¾ç¼–å·ï¼Œå…¶æ ¼å¼x-x
}{ % ç¡•åšå›¾è¡¨å…¬å¼é¢˜æ³¨ç¼–å·æ ¼å¼ ğŸ‘‡
  \renewcommand{\theequation}{\arabic{chapter}-\arabic{equation}} % æ˜¾ç¤ºå…¬å¼ç¼–å·ï¼Œå…¶æ ¼å¼x-x
  \renewcommand{\thetable}{\arabic{chapter}-\arabic{table}}       % æ˜¾ç¤ºè¡¨æ ¼ç¼–å·ï¼Œå…¶æ ¼å¼x-x
  \renewcommand{\thefigure}{\arabic{chapter}-\arabic{figure}}     % æ˜¾ç¤ºæ’å›¾ç¼–å·ï¼Œå…¶æ ¼å¼x-x
}
%chapterç« åºå·è®¡æ•°å™¨ï¼ŒsectionèŠ‚åºå·è®¡æ•°å™¨ï¼Œsubsectionå°èŠ‚åºå·è®¡æ•°å™¨ï¼Œsubsubsectionå°å°èŠ‚åºå·è®¡æ•°å™¨ï¼Œparagraphæ®µåºå·è®¡æ•°å™¨ï¼Œfigureæ’å›¾åºå·è®¡æ•°å™¨ï¼Œtableè¡¨æ ¼åºå·è®¡æ•°å™¨ï¼Œpageé¡µç åºå·è®¡æ•°å™¨ï¼Œequationå…¬å¼åºå·è®¡æ•°å™¨


% ===============è®¾ç½®å›¾è¡¨æ ¼å¼===============
\captionsetup{width=\textwidth - 60pt}
\captionsetup[subfigure]{aboveskip=2pt, belowskip=2pt} % width=36pt è®¾ç½®å­å›¾æ ‡é¢˜çš„å®½åº¦ 
\captionsetup[subfoat]{aboveskip=2pt, belowskip=2pt}
\captionsetup[figure]{aboveskip=3pt, belowskip=0pt} %è®¾ç½®æ ‡é¢˜ä¸æ’å›¾æˆ–è¡¨æ ¼ä¹‹é—´çš„å‚ç›´è·ç¦»ï¼Œè®¾ç½®æ ‡é¢˜ä¸ä¸‹æ–‡ä¹‹é—´çš„é™„åŠ å‚ç›´è·ç¦», å¦‚æœæ ‡é¢˜åœ¨æ’å›¾æˆ–è¡¨æ ¼ä¹‹ä¸‹;æˆ–æ ‡é¢˜ä¸ä¸Šæ–‡ä¹‹é—´çš„é™„åŠ å‚ç›´è·ç¦», å¦‚æœæ ‡é¢˜åœ¨æ’å›¾æˆ–è¡¨æ ¼ä¹‹ä¸Šã€‚
\captionsetup[table]{aboveskip=0pt, belowskip=6pt}
\captionsetup[longtable]{aboveskip=0pt, belowskip=6pt}
\setlength{\intextsep}{9pt} % æ§åˆ¶å‡ºç°åœ¨é¡µâ¾¯ä¸­é—´çš„æµ®åŠ¨ä½“ï¼ˆå¦‚ä½¿â½¤äº†h é€‰é¡¹çš„æµ®åŠ¨ä½“ï¼‰ä¸ä¸Šä¸‹æ–¹æ–‡æœ¬ä¹‹é—´çš„å‚ç›´è·ç¦»
% \setlength{\textfloatsep}{6pt} % æ§åˆ¶å‡ºç°åœ¨é¡µâ¾¯çš„é¡¶éƒ¨æˆ–åº•éƒ¨çš„æµ®åŠ¨ä½“ä¸â½‚æœ¬ä¹‹é—´çš„å‚ç›´è·ç¦»


\AtBeginEnvironment{figure}{\def\@floatboxreset{\centering}} % è®©å›¾ç¯å¢ƒçš„å†…å®¹å±…ä¸­
\AtBeginEnvironment{table}{\def\@floatboxreset{\centering}}  % è®©è¡¨æ ¼ç¯å¢ƒçš„å†…å®¹å±…ä¸­
\AtBeginEnvironment{tabular}{\small}                         % è¡¨æ ¼å­—ä½“å°äº”
\AtBeginEnvironment{tabular*}{\small}                        % è¡¨æ ¼å­—ä½“å°äº”
\AtBeginEnvironment{longtable}{\small}                       % è·¨é¡µè¡¨æ ¼å­—ä½“å°äº”
%\captionsetup{format=hang} %captionå·¥å…·åŒ…åœ¨åŠ è½½æ—¶å¯ä»¥ä¿®æ”¹æ ‡é¢˜çš„å¾ˆå¤šæ–¹é¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ captionsetupå‘½ä»¤ä¹Ÿå¯ä»¥åœ¨å·¥å…·åŒ…é€‰é¡¹ä¸­ä¿®æ”¹ã€‚\captionsetup[æµ®åŠ¨ä½“ç±»å‹]{å‚æ•°1=é€‰é¡¹, å‚æ•°2=é€‰é¡¹,â€¦}å…¶ä¸­å¯é€‰å‚æ•°æµ®åŠ¨ä½“ç±»å‹çš„é€‰é¡¹å¯ä»¥æ˜¯figureæˆ–table,å¦‚æœçœç•¥è¯¥å‚æ•°, åˆ™è¡¨ç¤ºè¿™ä¸¤ç§æµ®åŠ¨ä½“éƒ½é€‚ç”¨ã€‚formatï¼šplainé»˜è®¤å€¼,å°†æ ‡é¢˜ä½œä¸ºæ™®é€šæ®µè½æ’ç‰ˆã€‚hangå°†æ ‡é¢˜ä»ç¬¬äºŒè¡Œèµ·æ‚¬æŒ‚ç¼©è¿›æ’ç‰ˆï¼Œç¼©è¿›å®½åº¦ç­‰äºæ ‡é¢˜æ ‡å¿—åŠ åˆ†éš”ç¬¦çš„å®½åº¦ã€‚indentionè®¾ç½®ä»æ ‡é¢˜ç¬¬äºŒè¡Œèµ·çš„é™„åŠ ç¼©è¿›å®½åº¦, ä¾‹å¦‚indention=5mm,å…¶é»˜è®¤å€¼æ˜¯0ptã€‚
%æ ‡é¢˜è®¾ç½®\captionsetup


% ===============ç« èŠ‚å’Œç›®å½•æ·±åº¦è®¾ç½®===============
\setcounter{secnumdepth}{3} % è®¾ç½®ç« èŠ‚æ·±åº¦
\setcounter{tocdepth}{2}    % è®¾ç½®ç›®å½•æ·±åº¦



% ===============è®¾ç½®æ ‡é¢˜å­—ä½“=============== 
\ifbachelor{ % æœ¬ç§‘æ ‡é¢˜æ ¼å¼è®¾ç½® ğŸ‘‡
  \newcommand{\bachelorchapterformat}{} % å®šä¹‰\bachelorchapterformatå‘½ä»¤ï¼Œç”¨äºä¿®æ”¹æœ¬ç§‘ä¸€çº§æ ‡é¢˜æ ¼å¼

  \titleformat{\chapter}[block]
  {\bachelorchapterformat\fontsize{16pt}{16pt}\selectfont\heiti\thispagestyle{fancy}} % æœ¬ç§‘chapteræ ¼å¼
  {\thechapter}{20pt}{}

  \titleformat{\section}[block]
  {\fontsize{14pt}{14pt}\selectfont\heiti} % \heiti è®¾ç½®ä¸ºç²—ä½“
  {\thesection}{10pt}{}

  \titleformat{\subsection}[block]
  {\fontsize{14pt}{14pt}\selectfont\kaiti}
  {\thesubsection}{0pt}{}

  \titleformat{\subsubsection}[block]
  {\fontsize{12pt}{12pt}\selectfont}
  {\thesubsubsection}{6pt}{}
  \renewcommand{\thesubsubsection}{\arabic{subsubsection}.} % å››çº§æ ‡é¢˜æ ¼å¼è®¾ç½®ä¸º 1.
}{ % ç¡•åšæ ‡é¢˜æ ¼å¼è®¾ç½® ğŸ‘‡
  \titleformat{\chapter}[block]
  {\centering\fontsize{16pt}{16pt}\selectfont\heiti\thispagestyle{fancy}}
  {\thechapter}{7.5pt}{}

  \titleformat{\section}[block]
  {\centering\fontsize{14pt}{14pt}\selectfont}
  {\thesection}{7pt}{}

  \titleformat{\subsection}[block]
  {\fontsize{14pt}{14pt}\selectfont}
  {\thesubsection}{7pt}{}

  \titleformat{\subsubsection}[block]
  {\fontsize{12pt}{12pt}\selectfont}
  {\thesubsubsection}{6pt}{}
  \renewcommand{\thesubsubsection}{\arabic{subsubsection}.} % å››çº§æ ‡é¢˜æ ¼å¼è®¾ç½®ä¸º 1.
}

%=========================ä¸­æ–‡æ‘˜è¦
\newenvironment{chineseabstract}{
  \ifbachelor{ % æœ¬ç§‘æ‘˜è¦æ ¼å¼è®¾ç½® ğŸ‘‡
    \renewcommand{\bachelorchapterformat}{\centering}
    \chapter*{\texorpdfstring{\textbf{æ‘˜\quad è¦}}{æ‘˜ è¦}}% æœ¬ç§‘æ‘˜è¦æ ‡é¢˜æ˜¯é»‘ä½“ä¸‰å·åŠ ç²—
    \renewcommand{\bachelorchapterformat}{}
  }{ % ç¡•åšæ‘˜è¦æ ¼å¼è®¾ç½® ğŸ‘‡
    \chapter*{\texorpdfstring{\heiti æ‘˜\quad è¦}{æ‘˜ è¦}}
    \addcontentsline{toc}{chapter}{\texorpdfstring{æ‘˜\quad è¦}{æ‘˜ è¦}} % è®¾ç½®åœ¨ç›®å½•æ˜¾ç¤ºæ‘˜è¦
  }

  \setcounter{page}{1}  % å®šä¹‰ä¸ºç¬¬ä¸€é¡µ
  \pagenumbering{Roman} % è®¾ç½®é¡µç æ˜¾ç¤ºä¸ºç½—é©¬æ•°å­—

  \fancyhf{}   % åˆå§‹åŒ–é¡µç é¡µè„šå¸ƒå±€
  \ifbachelor{ % æœ¬ç§‘æ‘˜è¦é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰} % è®¾ç½®é¡µçœ‰
    \fancyhead[RE,RO]{\fontsize{10.5pt}{12.6pt}\selectfont ç¬¬\thepage é¡µ\enspace å…± \pageref{page:tableofcontents} é¡µ}
  }{ % ç¡•åšæ‘˜è¦é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont æ‘˜\quad è¦} % è®¾ç½®é¡µçœ‰
    \fancyfoot[CE,CO]{\fontsize{9pt}{10.8pt}\selectfont\thepage}  % ç½—é©¬é¡µç å±…ä¸­æ˜¾ç¤º
  }
}{
  \ifpversion{
    \checkoddpage
    \ifoddpage
      \blankpage@number
    \else
      \newpage
    \fi
  }{
    \newpage
  }


}

%=========================ä¸­æ–‡å…³é”®å­—
\newcommand{\chinesekeyword}[1]{
  \vspace{\baselineskip}
  \noindent\
  @hangfrom{\makebox[48pt][l]{\textbf{å…³é”®è¯ï¼š}}}#1
}

%=========================è‹±æ–‡æ‘˜è¦
\newenvironment{englishabstract}
{
  \ifbachelor{ % æœ¬ç§‘è‹±æ–‡æ‘˜è¦æ ¼å¼è®¾ç½® ğŸ‘‡
    \renewcommand{\bachelorchapterformat}{\centering}
    \chapter*{\bfseries\selectfont\heiti Abstract} % æœ¬ç§‘è‹±æ–‡æ‘˜è¦æ ‡é¢˜é¦–å­—æ¯å¤§å†™
    \renewcommand{\bachelorchapterformat}{}
  }{ % ç¡•åšè‹±æ–‡æ‘˜è¦æ ¼å¼è®¾ç½® ğŸ‘‡
    \chapter*{\bfseries ABSTRACT}
    \addcontentsline{toc}{chapter}{\bfseries ABSTRACT} % è®¾ç½®åœ¨ç›®å½•æ˜¾ç¤º
  }

  \fancyhf{}
  \ifbachelor{ % æœ¬ç§‘è‹±æ–‡æ‘˜è¦é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰} 
    \fancyhead[RE,RO]{\fontsize{10.5pt}{12.6pt}\selectfont ç¬¬\thepage é¡µ\enspace å…± \pageref{page:tableofcontents} é¡µ}
  }{ % ç¡•åšè‹±æ–‡æ‘˜è¦é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont ABSTRACT}
    \fancyfoot[CE,CO]{\fontsize{9pt}{10.8pt}\selectfont\thepage}
  }

}{
  \ifpversion{
    \checkoddpage
    \ifoddpage
      \blankpage@number
    \else
      \newpage
    \fi
  }{
    \newpage
  }
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%è‹±æ–‡å…³é”®å­—
\newcommand{\englishkeyword}[1]
{
  \vspace{\baselineskip}
  \noindent
  \@hangfrom{\makebox[2.1cm][l]{\textbf{Keywords:}}}#1
}


% å®šä¹‰åŠ å…¥ç›®å½•çš„è¯è¯­
% \addtocontents{æ‰©å±•å} {æ–‡æœ¬}å®ƒå¯ä»¥å°†ä»»æ„æ–‡æœ¬å’Œç›¸å…³æ ¼å¼å‘½ä»¤å†™å…¥ç›®å½•æˆ–åœ¨åˆ›å»ºç›®å½•æ—¶ï¼ˆå¦‚æœæ˜¯å‘½ä»¤ï¼‰åˆ™è¢«æ‰§è¡Œ,ä½†å®ƒä¸ä¼šå°†å‘½ä»¤å†™å…¥ç›®å½•ã€‚ æ–‡æœ¬å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦æˆ–\vspaceã€\newpageç­‰è°ƒæ•´æŸä¸€æ¡ç›®æ ¼å¼çš„å‘½ä»¤,ä¸€èˆ¬åœ¨å‘½ä»¤å‰åŠ \protectã€‚
\AddToHook {shipout/background}{\addtocontents{toc}{\protect\cftsetpnumwidth{\widthof{\thepage}-1pt}}}

\AddToHook {shipout/background}{\addtocontents{lof}{\protect\cftsetpnumwidth{\widthof{\thepage}-1pt}}}

\AddToHook {shipout/background}{\addtocontents{lot}{\protect\cftsetpnumwidth{\widthof{\thepage}-1pt}}}

% è®¾ç½®å¥‡æ•°å’Œå¶æ•°é¡µé¡µçœ‰æ æ–‡å­—%ä½¿ç”¨è®¡æ•°å™¨
\tocloftpagestyle{fancy} % ç”¨æˆ·è‡ªå®šä¹‰çš„å¥‡é¡µçœ‰ä½¿ç”¨æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦xxxï¼Œå¶æ•°ä½¿ç”¨æ ‡é¢˜ï¼Œé¡µè„šé¡µçœ‰å±…ä¸­
\renewcommand{\cftchappagefont}{\normalfont}
\renewcommand\cftchapleader{\cftdotfill{\cftdotsep}}
\renewcommand{\cftdotsep}{0.4}

\setlength{\cftbeforetoctitleskip}{0pt}
\setlength{\cftaftertoctitleskip}{18pt}
\setlength{\cftbeforechapskip}{0pt}
\ifbachelor{ % æœ¬ç§‘ç›®å½•æ ¼å¼ ğŸ‘‡
  \cftsetindents{chapter}{0pt}{20pt} % ä¸€ä¸ªç©ºæ ¼çº¦ä¸º5ç£…
  \cftsetindents{section}{0pt}{25pt}
  \cftsetindents{subsection}{0pt}{30pt}
  \cftsetindents{subsubsection}{0pt}{41pt}
  % æœ¬ç§‘ç›®å½•å­—ä½“å¤§å°
  \renewcommand\cftchapfont{\fontsize{15pt}{15pt}\selectfont\heiti}
  \renewcommand\cftsecfont{\fontsize{14pt}{14pt}\selectfont\heiti}
  \renewcommand\cftsubsecfont{\fontsize{14pt}{15pt}\selectfont\kaiti}
}{ % ç¡•åšç›®å½•æ ¼å¼ ğŸ‘‡
  \addtolength{\cftchapnumwidth}{25pt}

  \cftsetindents{section}{21pt}{22pt}
  \cftsetindents{subsection}{44pt}{31pt}
  \cftsetindents{subsubsection}{76pt}{41pt}

  \renewcommand{\cfttoctitlefont}{\fontsize{15pt}{15pt}\selectfont\heiti}
  \renewcommand\cftchapfont{\heiti}
}



% ====================æ­£æ–‡é¡µçœ‰è®¾ç½®====================
\renewcommand{\chaptermark}[1]{\markboth{\thechapter\hspace*{5.25pt}#1}{}} % ä¿®æ”¹é¡µçœ‰ç« èŠ‚æ˜¾ç¤ºå†…å®¹ %\markboth{<å·¦é¢é¡µçœ‰>}{<å³é¢é¡µçœ‰>}
\ifbachelor{ % æœ¬ç§‘é¡µçœ‰æ–‡å­— ğŸ‘‡
  \newcommand{\standardheader}{
    \fancyhf{}
    \fancyhead[CE,CO]{\fontsize{10.5pt}{12.6pt}\selectfont æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰}
    \fancyhead[RE,RO]{\fontsize{10.5pt}{12.6pt}\selectfont ç¬¬\thepage é¡µ\enspace å…± \pageref {LastPage} é¡µ }
  }
}{ % ç¡•åšé¡µçœ‰æ–‡å­— ğŸ‘‡
  \newcommand{\standardheader}{
    \fancyhf{}
    \fancyhead[CE]{\fontsize{10.5pt}{12.6pt}\selectfont\zh@thetitle}
    \fancyhead[CO]{\fontsize{10.5pt}{12.6pt}\selectfont\leftmark} % å¥‡æ•°é¡µé¡µçœ‰ä½¿ç”¨æ ‡é¢˜
    \fancyfoot[CE,CO]{\fontsize{9pt}{10.8pt}\selectfont\thepage}
  }
}


% ====================å°†é»˜è®¤åç§°æ”¹ä¸ºä¸­æ–‡====================


% ===============å›¾è¡¨å…¬å¼å¼•ç”¨è®¾ç½®=============== cleveref
% \crefformat{equation}{å¼#1} %å…¬å¼å¼•ç”¨æ ‡ç­¾ä¸­å»æ‰æ‹¬å·
\crefname{figure}{å›¾}{å›¾} % æ›´æ”¹å¼•ç”¨å‰ç¼€ å‚æ•°äºŒä¸ºå•ç‹¬å¼•ç”¨
\crefname{table}{è¡¨}{è¡¨}  % å‚æ•°ä¸‰ä¸ºå¤šä¸ªå¼•ç”¨
\crefname{equation}{å¼}{å¼}
\crefname{algorithm}{ç®—æ³•}{ç®—æ³•}
\crefname{chapter}{}{}
\crefname{section}{}{}
\crefname{subsection}{}{}
\renewcommand{\contentsname}{ç›®\quad å½•}          % ä½¿é»˜è®¤çš„Contentsæ”¹ä¸ºç›® å½•æ˜¾ç¤º
\renewcommand{\bibname}{å‚è€ƒæ–‡çŒ®}                 % ä½¿é»˜è®¤çš„å‚è€ƒæ–‡çŒ®åå­—æ”¹ä¸ºå‚è€ƒæ–‡çŒ®æ˜¾ç¤º
\renewcommand{\figurename}{å›¾}                    % ä½¿é»˜è®¤çš„å›¾åå­—æ”¹ä¸ºå›¾æ˜¾ç¤º
\renewcommand{\tablename}{è¡¨}                     % ä½¿é»˜è®¤çš„è¡¨åå­—æ”¹ä¸ºè¡¨æ˜¾ç¤º
\renewcommand{\listfigurename}{æ’å›¾ç´¢å¼•}
\renewcommand{\listtablename}{æ’è¡¨ç´¢å¼•}
\renewcommand{\thesubfigure}{(\alph{subfigure})} % è®¾ç½®å­å›¾æ ‡é¢˜åºå·  
\setlength{\extrarowheight}{2pt} % è¡Œè·


% ====================ç›®å½•è®¾ç½®====================
\ifbachelor{ % æœ¬ç§‘ç›®å½•æ ‡é¢˜ä½¿å…¶å±…ä¸­ ğŸ‘‡
  \newcommand{\thesistableofcontents}
  {
    \renewcommand{\bachelorchapterformat}{\centering}
    \begin{spacing}{2} % æœ¬ç§‘ç›®å½•ä¸¤å€è¡Œè·
      \tableofcontents
    \end{spacing}
    \renewcommand{\bachelorchapterformat}{} % è¿˜åŸåˆå§‹è®¾ç½®
    \label{page:tableofcontents} % è®¾ç½®pagerefè·å–é¡µç æ•°çš„æ ‡è®°
  }
}{ % ç¡•åšç›®å½•æ ‡é¢˜ç»Ÿä¸€å±…ä¸­æ— éœ€æ›´æ”¹ ğŸ‘‡
  \newcommand{\thesistableofcontents}{\tableofcontents}
}


\pretocmd{\tableofcontents}{
  \newpage
  \fancyhf{}

  \ifbachelor{ % æœ¬ç§‘ç›®å½•é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰}
    \fancyhead[RE,RO]{\fontsize{10.5pt}{12.6pt}\selectfont ç¬¬\thepage é¡µ\enspace å…± \pageref{page:tableofcontents} é¡µ}
  }{ % ç¡•åšç›®å½•é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont ç›®\quad å½•}
    \fancyfoot[CE,CO]{\fontsize{9pt}{10.8pt}\selectfont\thepage}
  }
  \pdfbookmark{ç›®å½•}{toc}
}{}{}


% ====================æ’å›¾ç´¢å¼•æ ¼å¼è®¾ç½®====================
\ifbachelor{ % å®šä¹‰æœ¬ç§‘æ’å›¾ç´¢å¼• ğŸ‘‡
  \newcommand{\thesisfigurelist}
  {
    \renewcommand{\bachelorchapterformat}{\centering} % è®¾ç½®æ ‡é¢˜å±…ä¸­
    \setstretch{2.0}                                  % è®¾ç½®äºŒå€è¡Œè·
    \listoffigures
    \setstretch{1.389}                                % è¡Œè·è®¾ç½®å›20ç£…
    \renewcommand{\bachelorchapterformat}{}           % è¿˜åŸåˆå§‹è®¾ç½®ï¼šå·¦å¯¹é½
  }
}{ % å®šä¹‰ç¡•åšæ’å›¾ç´¢å¼•å‘½ä»¤ ğŸ‘‡
  \newcommand{\thesisfigurelist}{\listoffigures}      % è‡ªå®šä¹‰è°ƒç”¨\listoffiguresçš„å‘½ä»¤
}

\pretocmd{\listoffigures}
{  % å›¾ç›®å½•æ˜¯å­˜æ”¾åœ¨.lofç›®å½•çš„æ–‡ä»¶ä¸‹
  \newpage % æ–°å»ºä¸€é¡µ
  \fancyhf{} % åˆå§‹åŒ–é¡µç é¡µè„šå¸ƒå±€
  \ifbachelor{ % æœ¬ç§‘æ’å›¾ç´¢å¼•é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont{æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰}}
    \fancyhead[RE,RO]{\fontsize{10.5pt}{12.6pt}\selectfont ç¬¬\thepage é¡µ\enspace å…± \pageref{page:tableofcontents} é¡µ}
  }{ % ç¡•åšæ’å›¾ç´¢å¼•é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont{æ’å›¾ç´¢å¼•}}
    \fancyfoot[CE,CO]{\fontsize{9pt}{10.8pt}\selectfont\thepage}
  }
  \addtolength{\cftfignumwidth}{12pt} % è®¾ç½®é•¿åº¦å‘½ä»¤ï¼Œä½¿å‘½ä»¤\cftfignumwidthçš„é•¿åº¦è®¾ç½®ä¸º12ptï¼Œæ¡ç›®ç¼–å·ä¸æ¡ç›®å†…å®¹ä¹‹é—´å ç”¨çš„å®½åº¦, ä¾‹å¦‚ï¼šå›¾ 1-2 [\cftfignumwidth] ç”µå­æˆ˜é£æœº
  \renewcommand{\cftfigpresnum}{å›¾} % æ¡ç›®ç¼–å·å‰å†…å®¹  
  \addtocontents{toc}{\protect\setcounter{tocdepth}{0}} % å°†ç›®å½•æ·±åº¦è®¾ç½®ä¸º0 å°±ä¼šåœ¨ç›®å½•ä¸­æ˜¾ç¤º
}{}{}

% ====================æ’è¡¨ç´¢å¼•æ ¼å¼è®¾ç½®====================
\ifbachelor{ % å®šä¹‰æœ¬ç§‘æ’è¡¨ç´¢å¼• ğŸ‘‡
  \newcommand{\thesistablelist}
  {
    \renewcommand{\bachelorchapterformat}{\centering} % è®¾ç½®æ ‡é¢˜å±…ä¸­
    \setstretch{2.0}                                  % è®¾ç½®äºŒå€è¡Œè·
    \listoftables
    \setstretch{1.389}                                % è¡Œè·è®¾ç½®å›20ç£…
    \renewcommand{\bachelorchapterformat}{}           % è¿˜åŸåˆå§‹è®¾ç½®ï¼šå·¦å¯¹é½
  }
}{ % å®šä¹‰ç¡•åšæ’è¡¨ç´¢å¼•å‘½ä»¤ ğŸ‘‡
  \newcommand{\thesistablelist}{\listoftables}        % è‡ªå®šä¹‰\thesistablelistå‘½ä»¤
}

\pretocmd{\listoftables}
{ % è¡¨ç›®å½•æ˜¯å­˜æ”¾åœ¨.lotç›®å½•çš„æ–‡ä»¶ä¸‹
  \newpage
  \fancyhf{}
  \ifbachelor{ % æœ¬ç§‘æ’è¡¨ç´¢å¼•é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont{æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰}}
    \fancyhead[RE,RO]{\fontsize{10.5pt}{12.6pt}\selectfont ç¬¬\thepage é¡µ\enspace å…± \pageref{page:tableofcontents} é¡µ}
  }{ % ç¡•åšæ’è¡¨ç´¢å¼•é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont{æ’è¡¨ç´¢å¼•}}
    \fancyfoot[CE,CO]{\fontsize{9pt}{10.8pt}\selectfont\thepage}
  }
  \addtolength{\cfttabnumwidth}{12pt} % æ¡ç›®ç¼–å·å ç”¨å®½åº¦ï¼Œæ¡ç›®ç¼–å·ä¸æ¡ç›®å†…å®¹ä¹‹é—´å ç”¨çš„å®½åº¦, ä¾‹å¦‚ï¼šè¡¨1-1 [\cftfignumwidth] å‚æ•°è®¾ç½®
  \renewcommand{\cfttabpresnum}{è¡¨} % æ¡ç›®ç¼–å·å‰å†…å®¹
  \addtocontents{toc}{\protect\setcounter{tocdepth}{0}} % å°†ç›®å½•æ·±åº¦è®¾ç½®ä¸º-1ï¼Œç›®å½•ä¸­åªæ˜¾ç¤ºä¸€çº§æ ‡é¢˜ 0 ä¸ºchapter
}{}{}


% ====================ç¬¦å·è¯´æ˜é¡µé¢è®¾ç½®====================
\newcommand{\thesissymbollist}{
  \ifbachelor{ % è®¾ç½®æœ¬ç§‘æ’è¡¨ç´¢å¼•æ ‡é¢˜ ğŸ‘‡
    \renewcommand{\bachelorchapterformat}{\centering} % è®¾ç½®æ ‡é¢˜å±…ä¸­
    \setstretch{2.0} % è®¾ç½®äºŒå€è¡Œè·
  }{}

  \newpage
  \fancyhf{}
  \ifbachelor{ % æœ¬ç§‘ç¬¦å·è¯´æ˜é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont{æ¡‚æ—ç”µå­ç§‘æŠ€å¤§å­¦æ¯•ä¸šè®¾è®¡ï¼ˆè®ºæ–‡ï¼‰}}
    \fancyhead[RE,RO]{\fontsize{10.5pt}{12.6pt}\selectfont ç¬¬\thepage é¡µ\enspace å…± \pageref{page:tableofcontents} é¡µ}
  }{ % ç¡•åšç¬¦å·è¯´æ˜é¡µçœ‰é¡µç è®¾ç½® ğŸ‘‡
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont{ç¬¦å·è¯´æ˜}}
    \fancyfoot[CE,CO]{\fontsize{9pt}{10.8pt}\selectfont\thepage}
  }

  \renewcommand{\nomname}{ç¬¦å·è¯´æ˜} % ä¿®æ”¹ç¬¦å·è¯´æ˜æ ‡é¢˜çš„åç§°ã€‚

  { \small                     % è®¾ç½®ç¬¦å·è¯´æ˜å­—ä½“å¤§å°ä¸ºäº”å·
    \printnomenclature[1.5 cm] % è®¾ç½®æœ¯è¯­ä¸æè¿°ä¹‹é—´çš„è·ç¦» 
  }

  \addcontentsline{toc}{chapter}{\texorpdfstring{\heiti ç¬¦å·è¯´æ˜}{ç¬¦å·è¯´æ˜}} % è®¾ç½®åœ¨ç›®å½•æ˜¾ç¤ºç¬¦å·è¯´æ˜

  \ifbachelor{ % è®¾ç½®æœ¬ç§‘æ’è¡¨ç´¢å¼•æ ‡é¢˜ ğŸ‘‡
    \renewcommand{\bachelorchapterformat}{} % è¿˜åŸåˆå§‹è®¾ç½®ï¼šå·¦å¯¹é½
    \setstretch{1.389}                      % è¡Œè·è®¾ç½®å›20ç£…
  }{}

  \ifpversion{ % æ‰“å°ç‰ˆæœ¬åˆ‡æ¢
    \checkoddpage
    \ifoddpage
      \blankpage@number
    \else
      \newpage
    \fi
  }{}
}

% ====================ç¬¦å·è¡¨æ ¼å¼è®¾ç½®====================
% è®¾ç½®ç¬¦å·è¯´æ˜ä¸ºåŒæ æ˜¾ç¤º
\renewcommand*\nompreamble{\begin{multicols}{2}}
\renewcommand*\nompostamble{\end{multicols}}

% æ›´æ”¹æœ¯è¯­ä¹‹é—´çš„å‚ç›´è¡Œé—´è·
\newlength{\nomitemorigsep}
\setlength{\nomitemorigsep}{\nomitemsep}
\setlength{\nomitemsep}{-1\parsep} % Baseline skip between items

% åˆ›å»ºç¬¦å·è¯´æ˜åˆ†ç»„
\renewcommand{\nomgroup}[1]
{
  \ifthenelse
  {\equal{#1}{A}}
  {\vspace{9pt} \item[\textbf{å¸Œè…Šå­—ç¬¦}]}
  {\ifthenelse
    {\equal{#1}{B}}
    {\vspace{9pt} \item[\textbf{ä¸‹æ ‡}]}
    {\ifthenelse{\equal{#1}{C}}{\vspace{9pt} \item[\textbf{ç¼©ç•¥è¯­}]}{}}
  }
  \itemsep\nomitemsep % åº”ç”¨ä¸Šé¢è®¾ç½®çš„æœ¯è¯­å‚ç›´è¡Œé—´è·
}
\makenomenclature % åº”ç”¨ç¬¦å·è¡¨

% ====================ç®—æ³•æ ====================
\SetAlgorithmName{ç®—æ³•}{ç®—æ³•}{ç®—æ³•åˆ—è¡¨}
\renewcommand\thealgocf{\arabic{chapter}-\arabic{algocf}}
\SetAlgoCaptionSeparator{\null}
\AtBeginEnvironment{algorithm}{\vspace{9pt}}
\AfterEndEnvironment{algorithm}{\vspace{9pt}}






% ====================è‡´è°¢è®¾ç½®====================
\newcommand{\thesisacknowledgement}
{
  \ifbversion{ % ç›²å®¡ åˆ™è‡´è°¢å‘½ä»¤ä¸ºç©º

  }{ % éç›²å®¡åˆ™å­˜åœ¨è‡´è°¢
    \ifbachelor{ % æœ¬ç§‘è‡´è°¢è®¾ç½® ğŸ‘‡
      \renewcommand{\bachelorchapterformat}{\centering}     % é€šè¿‡ä¿®æ”¹\bachelorchapterformatå‘½ä»¤è®©è‡´è°¢å±…ä¸­
      \addtocontents{toc}{\protect\setcounter{tocdepth}{0}} % åªæ˜¾ç¤ºä¸€çº§æ ‡é¢˜
      \setcounter{section}{0}                               % sectionè®¡æ•°å™¨æ¸…é›¶ 
      \chapter*{\texorpdfstring{è°¢\quad è¾}{è°¢ è¾}}
      \addcontentsline{toc}{chapter}{\texorpdfstring{è°¢\quad è¾}{è°¢ è¾}}
    }{ % ç¡•åšè‡´è°¢è®¾ç½® ğŸ‘‡
      \addtocontents{toc}{\protect\setcounter{tocdepth}{0}} % åªæ˜¾ç¤ºä¸€çº§æ ‡é¢˜
      \setcounter{section}{0}                               % sectionè®¡æ•°å™¨æ¸…é›¶ 
      \chapter*{\texorpdfstring{è‡´\quad è°¢}{è‡´ è°¢}}
      \addcontentsline{toc}{chapter}{\texorpdfstring{è‡´\quad è°¢}{è‡´ è°¢}}
    }

    \fancyhf{}
    \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont è‡´\quad è°¢}
    \fancyfoot[CE,CO]{\fontsize{9pt}{10.8pt}\selectfont\thepage}
    \thispagestyle{fancy}
    \normalsize                                             % è®¾ç½®å­—ä½“ä¸ºå°å››
    \input{Chapters/Thanks.tex}                             % è‡´è°¢æ–‡æ¡£ä½ç½®
    \ifbachelor{ % ä¸€çº§æ ‡é¢˜è¿˜åŸé»˜è®¤è®¾ç½® ğŸ‘‡
      \renewcommand{\bachelorchapterformat}{}
    }{}
  }
}

\newcommand{\thesiscontent}
{
  \newpage
  \clearpage{\thispagestyle{empty}\cleardoublepage}
  \addtocontents{toc}{\protect\setcounter{tocdepth}{2}}
  \standardheader
  \pagenumbering{arabic}
}

\pretocmd{\@chapter}
{
  \ifdefined\@BODY
  \else
    \ifnum\value{chapter}=0
      \thesiscontent
    \fi
  \fi
}{}{}

% ====================é™„å½•è®¾ç½®====================
\newcommand{\thesisappendix}
{ %é™„å½•æ ¼å¼è®¾ç½® ğŸ‘‡
  \newpage
  \appendix
  \interlinepenalty=0
  \addtocontents{toc}{\protect\setcounter{tocdepth}{2}}
  \titleformat{\chapter}[block]
  {\centering\fontsize{15pt}{15pt}\selectfont\heiti\thispagestyle{fancy}}{\thechapter}{7.5pt}{}

  \renewcommand{\thechapter}{é™„å½•\Alph{chapter}}
  \renewcommand{\appendixname}{é™„å½•}


  \renewcommand{\thesection}{\Alph{chapter}.\arabic{section}}
  \renewcommand{\theequation}{\alph{chapter}-\arabic{equation}}
  \renewcommand{\thetable}{\alph{chapter}-\arabic{table}}
  \renewcommand{\thefigure}{\alph{chapter}-\arabic{figure}}
  \renewcommand{\thetheorem}{\alph{chapter}.\arabic{theorem}}
  \renewcommand{\theaxiom}{\alph{chapter}.\arabic{axiom}}
  \renewcommand{\thecorollary}{\alph{chapter}.\arabic{corollary}}
  \renewcommand{\thelemma}{\alph{chapter}.\arabic{lemma}}
  \renewcommand{\thedefinition}{\alph{chapter}.\arabic{definition}}
  \renewcommand{\theexample}{\alph{chapter}.\arabic{example}}
}

\newcommand{\thesissingleappendix}
{
  \newpage
  \appendix
  \interlinepenalty=0
  \addtocontents{toc}{\protect\setcounter{tocdepth}{2}}
  \titleformat{\chapter}[block]
  {\centering\fontsize{15pt}{15pt}\selectfont\heiti\thispagestyle{fancy}}{é™„\quad å½•}{7.5pt}{}
  %\renewcommand{\thechapter}{é™„\quad å½•}

  \renewcommand{\appendixname}{é™„å½•}

  \renewcommand{\thesection}{A.\arabic{section}}

  \renewcommand{\theequation}{a-\arabic{equation}}
  \renewcommand{\thetable}{a-\arabic{table}}
  \renewcommand{\thefigure}{a-\arabic{figure}}
  \renewcommand{\thetheorem}{a.\arabic{theorem}}
  \renewcommand{\theaxiom}{a.\arabic{axiom}}
  \renewcommand{\thecorollary}{a.\arabic{corollary}}
  \renewcommand{\thelemma}{a.\arabic{lemma}}
  \renewcommand{\thedefinition}{a.\arabic{definition}}
  \renewcommand{\theexample}{a.\arabic{example}}


  \chapter*{é™„\quad å½•}
  \addcontentsline{toc}{chapter}{é™„å½•}
  \markboth{é™„å½•}{é™„å½•}

}



% ====================å‚è€ƒæ–‡çŒ®è®¾ç½®====================
\newcommand{\thesisbibliography}{\thesisloadbibliography}
\renewcommand{\bibname}{å‚è€ƒæ–‡çŒ®}
\renewcommand{\@biblabel}[1]{[#1]\hfill}

\newenvironment{thesisthebibliography}
{
  \begin{thebibliography}{lo}
    \interlinepenalty=10000
    \begin{spacing}{1.667}
      \thispagestyle{fancy}
      \small
      }{
    \end{spacing}
  \end{thebibliography}
}

\pretocmd{\bibliography} % è®¾ç½®é¡µçœ‰é¡µè„šè¡Œé—´è·
{
  \newpage
  \fancyhf{}
  \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont å‚è€ƒæ–‡çŒ®}
  \fancyfoot[CE,CO]{\fontsize{9pt}{10.8pt}\selectfont\thepage}
  \interlinepenalty=10000
  \begin{spacing}{1.667}
}{}{}

\apptocmd{\bibliography}
{
  \end{spacing}
}{}{}

\setlength{\bibsep}{0pt} % æ¶ˆé™¤å‚è€ƒæ–‡çŒ®æ¡ç›®é—´çš„é¢å¤–è¡Œé—´è·

\newcommand{\bstlabelmark}{lo}
\newcommand{\thesisloadbibliography}[2][]{
  \small
  \ifthenelse{ %\ifthenelse{åˆ¤æ–­æ¡ä»¶}{è‚¯å®šç»“æ„}{å¦å®šç»“æ„}
    \equal{#1}{large} %\equal{#1}{nocite} %åˆ¤æ–­#1æ˜¯å¦ç­‰äºnotice
  }{
    \setlength{\labelsep}{3pt}
    \renewcommand{\bstlabelmark}{loo}
    \bibliographystyle{References/GUET-Thesis(base-gbt7714-numerical)} % æ’å…¥å‚è€ƒæ–‡çŒ®çš„æ ·å¼.bstæ–‡ä»¶
    \bibliography{#2}
    \setlength{\labelsep}{6pt}
  }{
    \bibliographystyle{References/GUET-Thesis(base-gbt7714-numerical)} % æ’å…¥å‚è€ƒæ–‡çŒ®çš„æ ·å¼.bstæ–‡ä»¶
    \bibliography{#2} % å‚è€ƒæ–‡çŒ®æ ¼å¼ï¼Œç”¨äºæŒ‡å®šæ’ç‰ˆå‚è€ƒæ–‡çŒ®æ‰€ä½¿ç”¨çš„æ–‡çŒ®æ ¼å¼æ–‡ä»¶å.bib
  }
}


% ====================æ”»è¯»å­¦ä½æœŸé—´å–å¾—æˆæœ====================
\newcommand{\thesisaccomplish}{
  \addtocontents{toc}{\protect\setcounter{tocdepth}{0}} % åªæ˜¾ç¤ºä¸€çº§æ ‡é¢˜
  \setcounter{section}{0} % sectionè®¡æ•°å™¨æ¸…é›¶ 

  \chapter*{æ”»è¯»\degreename{}å­¦ä½æœŸé—´å–å¾—çš„æˆæœ}
  \addcontentsline{toc}{chapter}{æ”»è¯»\degreename{}å­¦ä½æœŸé—´å–å¾—çš„æˆæœ}
  \fancyhf{}
  \fancyhead[C]{\fontsize{10.5pt}{12.6pt}\selectfont æ”»è¯»\degreename{}å­¦ä½æœŸé—´å–å¾—çš„æˆæœ}
  \fancyfoot[CE,CO]{\fontsize{9pt}{10.8pt}\selectfont\thepage}
  \thispagestyle{fancy}
  \normalsize  % è®¾ç½®å­—ä½“ä¸ºå°å››
  \ifbversion{ % ç›²å®¡ç‰ˆå­¦æœ¯æˆæœğŸ‘‡
    \input{Chapters/Accomplish-bversion.tex} % å­¦æœ¯æˆæœæ–‡æ¡£ä½ç½®
  }{ % éç›²å®¡ç‰ˆå­¦æœ¯æˆæœğŸ‘‡
    \input{Chapters/Accomplish.tex}
  }

}


% ===============å®šç†è®¾ç½®===============
\newtheoremstyle{dotless}{0pt}{0pt}{\normalfont}{24pt}{\heiti}{}{ }{}
\theoremstyle{dotless} % plainï¼ˆé»˜è®¤æ ·å¼ï¼‰ï¼šå®šç†åç§°æ˜¯æ­£ä½“ï¼Œå®šç†å†…å®¹æ˜¯æ–œä½“ã€‚definitionï¼šå®šç†åç§°å’Œå®šç†å†…å®¹éƒ½æ˜¯æ­£ä½“ã€‚remarkï¼š å®šç†åç§°æ˜¯æ–œä½“ï¼Œå®šç†å†…å®¹æ˜¯æ­£ä½“


\newtheorem{theorem}{å®šç†}[chapter]
\newtheorem{axiom}[theorem]{å…¬ç†}
\newtheorem{corollary}[theorem]{æ¨è®º}
\newtheorem{lemma}[theorem]{å¼•ç†}
\newtheorem{definition}[theorem]{å®šä¹‰}
\newtheorem{example}[theorem]{ä¾‹å­}
\newtheorem{proposition}[theorem]{å‘½é¢˜}

% \newtheorem{ç¯å¢ƒå} [è®¡æ•°å™¨å] {æ ‡é¢˜} [æ’åºå•ä½]
% ç¯å¢ƒå ç»™æ‰€å®šä¹‰çš„å®šç†ç±»ç¯å¢ƒèµ·çš„åç§°, å®ƒä¸å¾—ä¸ç°æœ‰ç¯å¢ƒé‡å, å¦åˆ™ç³»ç»Ÿå°†æç¤ºå‡ºé”™ã€‚æ¯å®šä¹‰ä¸€ä¸ªç¯å¢ƒå, ç³»ç»Ÿå°±ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒåçš„è®¡æ•°å™¨, ç”¨äºä¸ºæ‰€å®šä¹‰çš„å®šç†ç±»ç¯å¢ƒæ’åºã€‚
% è®¡æ•°å™¨å å¯é€‰å‚æ•°, å¦‚æœå¸Œæœ›æ‰€å®šä¹‰çš„å®šç†ç±»ç¯å¢ƒä¸å·²å®šä¹‰çš„æŸä¸ªå®šç†ç±»ç¯å¢ƒæ··åˆæ’åº,å°±å¯åœ¨å…¶ä¸­å¡«å†™è¯¥ç¯å¢ƒçš„è®¡æ•°å™¨å, ä¹Ÿå°±æ˜¯è¯¥å®šç†ç±»ç¯å¢ƒçš„ç¯å¢ƒå;å¦‚æœçœç•¥è¿™ä¸ªå¯é€‰å‚æ•°, åˆ™è¡¨ç¤ºæœ¬å®šç†ç±»ç¯å¢ƒå•ç‹¬æ’åºã€‚
% æ ‡é¢˜ ç”¨äºè®¾ç½®å®šç†ç±»è¡¨è¾¾å¼çš„æ ‡é¢˜, å¦‚theoremå®šç†ï¼Œ è¯æ˜å’Œå¼•ç†ç­‰ã€‚
% æ’åºå•ä½ å¯é€‰å‚æ•°, ç”¨äºè®¾å®šæ’åºå•ä½, å¦‚æœæ˜¯chapter, åˆ™æ¯ä¸€æ–°ç« å¼€å§‹æ—¶æ‰€å®šä¹‰å®šç†ç±»ç¯å¢ƒçš„è®¡æ•°å™¨æ¸…é›¶; è¯¥å¯é€‰å‚æ•°çš„é»˜è®¤å€¼æ˜¯ä»¥å…¨æ–‡ä¸ºæ’åºå•ä½

\renewcommand{\thetheorem}{\arabic{chapter}.\arabic{theorem}}
\renewcommand{\theaxiom}{\arabic{chapter}.\arabic{axiom}}
\renewcommand{\thecorollary}{\arabic{chapter}.\arabic{corollary}}
\renewcommand{\thelemma}{\arabic{chapter}.\arabic{lemma}}
\renewcommand{\thedefinition}{\arabic{chapter}.\arabic{definition}}
\renewcommand{\theexample}{\arabic{chapter}.\arabic{example}}
% \renewcommand{\qedsymbol}{$\blacksquare$} %ç»“æŸç¬¦ï¼Œ\blacksquareå®å¿ƒæ–¹æ¡†ï¼Œ\squareç©ºå¿ƒæ–¹æ¡†

\renewcommand{\proofname}{è¯æ˜}
% å®šä¹‰è¯¥æ¨¡æ¿çš„è¯æ˜ç¯å¢ƒæ ¼å¼

% \renewenvironment{æ–°ç¯å¢ƒåç§°}[å‚æ•°ä¸ªæ•°][å‚æ•°é»˜è®¤å€¼]{å¼€å§‹éƒ¨åˆ†å®šä¹‰}{ç»“æŸéƒ¨åˆ†å®šä¹‰}
\renewenvironment{proof}[1][\proofname]{\par
  \pushQED{\qed} % è¿™é‡Œ \pushQED{\qed} æŠŠ \qed å‹å…¥äº† QED è¿™ä¸ªå †æ ˆï¼Œç„¶ååœ¨ç¯å¢ƒç»“æŸçš„åœ°æ–¹ï¼Œé€šè¿‡ \popQEDæŠŠå‹å…¥å †æ ˆçš„æœ€åä¸€ä¸ªå…ƒç´ å¼¹å‡ºæ¥ã€‚
  \normalfont % æ­£ä½“
  \topsep0pt \partopsep0pt
  \trivlist
  \item[\hskip5\labelsep
              \heiti
              #1\@addpunct{:}]\ignorespaces % \proofnameåé¢:
} % å¼€å§‹éƒ¨åˆ†å®šä¹‰
{
  \popQED\endtrivlist\@endpefalse
} % ç»“æŸéƒ¨åˆ†å®šä¹‰

% \newcommand{\citing}[1]{\textsuperscript{\cite{#1}}} %\textsuperscript{}æ–‡å­—ä¸Šæ ‡
\setlist{noitemsep} % æ¡ç›®ä¹‹é—´æ— é™„åŠ çš„å‚ç›´è·ç¦»
\setlist{nolistsep}

% \noindentè¡¨ç¤ºproofæ²¡æœ‰ç¼©è¿›ï¼Œ\itè¡¨ç¤ºproofæ–œä½“
% \quadè¡¨ç¤º\proofnameåé¢ç©ºå››ä¸ªç©ºæ ¼ï¼Œ\hfillè¡¨ç¤ºå³å¯¹é½ï¼Œ\squareè¡¨ç¤ºæ–¹æ¡†ï¼Œ\parè¡¨ç¤ºç»“å°¾ç©ºä¸€æ®µ.

\AtBeginDocument{
  \setlength{\abovedisplayskip}{8pt}
  \setlength{\belowdisplayskip}{8pt}
  \setlength{\belowdisplayshortskip}{8pt}
  \setlength{\abovedisplayshortskip}{8pt}
}


% =============== è‡ªå®šä¹‰ä¸‰çº¿è¡¨æ ¼å¼ ===============
\NewTblrEnviron{threetab}
\SetTblrInner[threetab]{
hline{1,Z} = {-}{1.5pt}, % è®¾ç½®å¤´çº¿å’Œå°¾çº¿ä¸º1.5pt
    hline{2} = {-}{0.5pt}, % è®¾ç½®ä¸­çº¿ 0.5pt
  }


\endinput
